<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptCaratula" language="groovy" pageWidth="300" pageHeight="30" whenNoDataType="NoDataSection" columnWidth="300" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="3d679b24-72d7-4efe-9ecb-ddd361aad873">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="YEAR" class="java.lang.String"/>
	<parameter name="RAMO" class="java.lang.String"/>
	<parameter name="IDCARATULA" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
                 	CAR.YEAR,
                 	CAR.RAMO,
                 	CAR.ID_CARATULA,
                 	TO_CHAR(CAR.FECHA_REVISION,'DD/MM/YYYY') AS FECHA_REVISION,
                 	CAR.NUMERO_SESION,
                 	CAR.TIPO_SESION,
                 	CAR.NUM_MOD_PRES,
                 	CAR.NUM_MOD_PROG,
                 	CAR.SYS_CLAVE,
                 	CAR.APP_LOGIN,
                 	CAR.STATUS,
                 	CAR.FECHA_REGISTRO,
                 	TIS.DESCR TIPOSESIONDESCR,
                 	(SELECT REVS.DESCR_CORTA||' '||REVS.DESCR FROM POA.REVISIONES_CARATULA REVS WHERE REVS.REVISION = CAR.NUMERO_SESION) NUMSESIONDESCR,
                 	NVL((SELECT REVS.DESCR_CORTA||' '||REVS.DESCR FROM POA.REVISIONES_CARATULA REVS WHERE REVS.REVISION = CAR.NUM_MOD_PRES),'No aplica') MODPRESUPDESCR,
                 	NVL((SELECT REVS.DESCR_CORTA||' '||REVS.DESCR FROM POA.REVISIONES_CARATULA REVS WHERE REVS.REVISION = CAR.NUM_MOD_PROG),'No aplica') MODPROGDESCR,
                 	(SELECT REVS.DESCR_CORTA||' '||REVS.DESCR FROM POA.REVISIONES_CARATULA REVS WHERE REVS.REVISION = CAR.NUMERO_SESION)||' '||LOWER(TIS.DESCR) DESCR
                 FROM
                 	POA.CARATULA CAR,
                 	POA.TIPO_SESION TIS
                 WHERE
                 	CAR.YEAR =$P{YEAR} AND
                 	CAR.RAMO = $P{RAMO} AND
                    CAR.ID_CARATULA=$P{IDCARATULA} AND


            	/*CAR.STATUS = 'A' AND*/

             	TIS.CVE_SESION = CAR.TIPO_SESION
                 ORDER BY
                 	CAR.NUMERO_SESION]]>
	</queryString>
	<field name="YEAR" class="java.lang.String"/>
	<field name="RAMO" class="java.lang.String"/>
	<field name="ID_CARATULA" class="java.lang.String"/>
	<field name="FECHA_REVISION" class="java.lang.String"/>
	<field name="NUMERO_SESION" class="java.lang.String"/>
	<field name="TIPO_SESION" class="java.math.BigDecimal"/>
	<field name="NUM_MOD_PRES" class="java.lang.String"/>
	<field name="NUM_MOD_PROG" class="java.lang.String"/>
	<field name="SYS_CLAVE" class="java.math.BigDecimal"/>
	<field name="APP_LOGIN" class="java.lang.String"/>
	<field name="STATUS" class="java.lang.String"/>
	<field name="FECHA_REGISTRO" class="java.sql.Timestamp"/>
	<field name="TIPOSESIONDESCR" class="java.lang.String"/>
	<field name="NUMSESIONDESCR" class="java.lang.String"/>
	<field name="MODPRESUPDESCR" class="java.lang.String"/>
	<field name="MODPROGDESCR" class="java.lang.String"/>
	<field name="DESCR" class="java.lang.String"/>
	<detail>
		<band height="12" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement uuid="5a97d7fa-23df-4f7d-a34b-081091eae287" x="0" y="0" width="300" height="12"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{DESCR} + " " + $F{MODPRESUPDESCR} + " Presupuestal " + $F{MODPROGDESCR} + " ProgramÃ¡tica "]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<noData>
		<band height="12">
			<staticText>
				<reportElement uuid="a37c0628-23ed-41c9-bc74-680faa935670" x="0" y="0" width="300" height="12"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[No Aplica]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
