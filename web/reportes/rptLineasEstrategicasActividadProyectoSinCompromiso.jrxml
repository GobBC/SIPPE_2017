<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptLineasEstrategicasActividadProyectoSinCompromiso" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a89524e2-618a-4b8b-b71b-7d8c1e4ca7a8">
	<property name="ireport.zoom" value="1.3310000000000008"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="YEAR" class="java.lang.Integer"/>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
	RAM.RAMO,
	RAM.DESCR AS RAMO_DESCR,
	PRG.PRG,
	PRG.DESCR AS PRG_DESCR,
	/*PROY.PROY,
	PROY.TIPO_PROY,
	VWSPPROYACT.DESCR AS DESCR_PROY,*/
	LIN.LINEA,
	LE.DESCR AS LINEA_DESCR,
	PARAM.GOBIERNO,
	PARAM.LOGO,
	PARAM.SECRETARIA,
	SYSDATE AS HOY

FROM
	POA.RAMO_PROGRAMA RAMPRG,
	DGI.RAMOS RAM,
	S_POA_PROGRAMA PRG,
	--DGI.VW_SP_PROY_ACT VWSPPROYACT,
	S_POA_SP_LIN_ESTATAL LE,
	(
		SELECT
			RAMO,
			PRG,
			LINEA,
			YEAR
		FROM
			POA.RAMO_PRG_LINEA
		WHERE
			YEAR = $P{YEAR}
			MINUS
			(
				SELECT
					M.RAMO,
					M.PRG,
					M.LINEA,
					M.YEAR
				FROM
					S_POA_META M,
					POA.RAMO_PRG_LINEA PL
				WHERE
					M.PRG = PL.PRG AND
					M.RAMO = PL.RAMO AND
					M.YEAR = PL.YEAR AND
					M.YEAR = $P{YEAR}

				UNION

				SELECT
					A.RAMO,
					A.PRG,
					B.LINEA,
					A.YEAR
				FROM
					S_POA_META A,
					S_POA_ACCION B,
					POA.RAMO_PRG_LINEA PL
				WHERE
					A.YEAR = B.YEAR AND
					A.RAMO = B.RAMO AND
					A.META = B.META AND
					A.PRG = PL.PRG AND
					A.RAMO = PL.RAMO AND
					A.YEAR = PL.YEAR AND
					A.YEAR = $P{YEAR}
			)
	) LIN,
	DGI.PARAMETROS PARAM

WHERE

	LIN.RAMO = RAMPRG.RAMO AND
	LIN.PRG = RAMPRG.PRG AND
	LIN.YEAR = RAMPRG.YEAR AND

	LIN.RAMO = RAM.RAMO AND
	LIN.YEAR = RAM.YEAR AND

	LIN.PRG = PRG.PRG AND
	LIN.YEAR = PRG.YEAR AND
/*
  	LIN.PRG = PROY.PRG AND
	LIN.RAMO = PROY.RAMO AND
	LIN.YEAR = PROY.YEAR AND

	PROY.PROY = VWSPPROYACT.PROY AND
	PROY.TIPO_PROY = VWSPPROYACT.TIPO_PROY AND
	PROY.YEAR = VWSPPROYACT.YEAR AND*/

	LIN.LINEA = LE.LINEA

ORDER BY
	RAM.RAMO,
	PRG.PRG,
	/*PROY.PROY,
	PROY.TIPO_PROY,*/
	LIN.LINEA]]>
	</queryString>
	<field name="RAMO" class="java.lang.String"/>
	<field name="RAMO_DESCR" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="PRG_DESCR" class="java.lang.String"/>
	<field name="LINEA" class="java.lang.String"/>
	<field name="LINEA_DESCR" class="java.lang.String"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="LOGO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="HOY" class="java.sql.Timestamp"/>
	<group name="ramo">
		<groupExpression><![CDATA[$F{RAMO}]]></groupExpression>
		<groupHeader>
			<band height="16">
				<textField isBlankWhenNull="true">
					<reportElement uuid="34b2d1c3-8280-4b6c-9f57-2503fa4848f8" x="0" y="0" width="751" height="15"/>
					<textElement>
						<font fontName="SansSerif" size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{RAMO} + " - " + $F{RAMO_DESCR}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="Programa">
		<groupExpression><![CDATA[$F{PRG}]]></groupExpression>
		<groupHeader>
			<band height="16">
				<textField isBlankWhenNull="true">
					<reportElement uuid="ef20523f-c783-4f5d-949d-13c6804958c1" x="15" y="0" width="736" height="15"/>
					<textElement>
						<font fontName="SansSerif" size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{PRG} + " - " + $F{PRG_DESCR}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="129">
			<textField>
				<reportElement uuid="8b1bb6f8-6a1b-4a59-94be-d8200204cb77" x="164" y="40" width="429" height="20"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA["Sistema de la Programación "]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="a60bf77f-b837-4a2a-8e77-b073092824e4" x="164" y="20" width="429" height="20"/>
				<textElement textAlignment="Center">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SECRETARIA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="72e73dbb-b75d-4df7-b449-ddc672b9594c" x="164" y="0" width="429" height="20"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GOBIERNO}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement uuid="a2b49ed5-afef-4a3d-81fb-35c8028c9c57" x="1" y="126" width="751" height="1"/>
			</line>
			<staticText>
				<reportElement uuid="83ac839b-41bc-48e4-afac-3ceaa5da70c9" x="1" y="81" width="66" height="15"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Ramo:]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="8d14f74c-8828-4cef-87cb-fd7cec0d0720" x="15" y="96" width="66" height="15"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Programa:]]></text>
			</staticText>
			<line>
				<reportElement uuid="a6da6f81-d9a6-4ea2-a5d1-5c6a58bcf1ae" x="1" y="80" width="751" height="1"/>
			</line>
			<textField>
				<reportElement uuid="523faf1c-7ad3-4766-9449-cc6aeb44f8af" x="164" y="60" width="429" height="20"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA["Líneas estrategicas por Programa que no  están en  el compromiso al " + $P{YEAR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="2fcea59e-7fb1-4219-94ad-6e126ae3a14a" x="44" y="111" width="66" height="15"/>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Líneas:]]></text>
			</staticText>
			<image hAlign="Center" vAlign="Middle">
				<reportElement uuid="a09a829b-3d0b-44fd-9073-417abadbd810" stretchType="RelativeToBandHeight" x="1" y="0" width="56" height="80"/>
				<imageExpression><![CDATA[$P{IMG_DIR}+"EDO.gif"]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<detail>
		<band height="15">
			<textField isBlankWhenNull="true">
				<reportElement uuid="d57cc839-5b1e-4358-94d0-1e72ed53311d" x="44" y="0" width="707" height="15"/>
				<textElement>
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{LINEA} + " - " + $F{LINEA_DESCR}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="11" splitType="Stretch">
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement uuid="9f193cbf-f4f6-4fec-ae9f-da433084666f" x="300" y="1" width="146" height="10"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{HOY}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement uuid="55657e43-4a2a-4cea-977c-eaf1a221401a" x="0" y="0" width="752" height="1"/>
			</line>
			<textField>
				<reportElement uuid="0a693d0b-5a53-41dc-ab79-ca7e70f4735b" x="677" y="0" width="43" height="10"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement uuid="96caeec8-1aba-4a91-95d9-2ad6915df398" x="720" y="0" width="31" height="10"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[" de " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement uuid="2e9d0fc7-9bb9-42ae-8abc-9743fff2279f" x="0" y="0" width="286" height="10"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA["rptLineasEstrategicasActividadProyectoSinCompromiso"]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
