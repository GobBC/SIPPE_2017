<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="subRptIndicadoresDimension" language="groovy" pageWidth="752" pageHeight="544" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="752" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isTitleNewPage="true" isIgnorePagination="true" uuid="c892a65b-aa61-4111-98e4-5a494e38a531">
	<property name="ireport.zoom" value="1.9487171000000016"/>
	<property name="ireport.x" value="617"/>
	<property name="ireport.y" value="0"/>
	<parameter name="YEAR" class="java.lang.String"/>
	<parameter name="RAMO" class="java.lang.String"/>
	<parameter name="PRG" class="java.lang.String"/>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\SIMG\\Desarrollo\\Web\\Java\\repositorio_local\\Aplicaciones Web\\POA\\web\\reportes\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
	DISTINCT
    IND.DIMENSION_ID,
    UPPER(IND.NOMBRE_DIMENSION) NOMBRE_DIMENSION,
	I.CLAVE_INDICADOR AS INDICADOR,
R.RAMO,
	I.NOMBRE_INDICADOR AS NOMBRE_INDICADOR,
	DECODE(I.PERIODICIDAD,1,'MENSUAL',DECODE(I.PERIODICIDAD,2,'BIMESTRAL',DECODE(I.PERIODICIDAD,3,'TRIMESTRAL',DECODE(I.PERIODICIDAD,4,'CUATRIMESTRAL',DECODE(I.PERIODICIDAD,6,'SEMESTRAL',DECODE(I.PERIODICIDAD,12,'ANUAL',DECODE(I.PERIODICIDAD,24,'BIANUAL',DECODE(I.PERIODICIDAD,36,'TRIANUAL',DECODE(I.PERIODICIDAD,60,'QUINQUEANUAL','')))))))))  AS PERIODICIDAD,
	MA.META AS META_ANUAL,
	METANT.META AS META_ANUAL_ANT,
	R.RAMO||' '||R.DESCR AS RAMO_DESC,
	P.PRG||' '||P.DESCR AS PROGRAMA,
	PTO.GOBIERNO AS GOBIERNO,
	PTO.SECRETARIA AS SECRETARIA,
	PTO.LOGO AS LOGO,
	SYSDATE AS FECHA,
	'' AS FOLIO,
	P.PRG AS PRG,
	PTO.PARAESTATAL AS PARAESTATAL,
	I.UNIDAD_MEDIDA AS UNIDAD_MEDIDA,
	I.OBJETIVO_INDICADOR AS OBJETIVO,
	DGI.F_ULT_RESULT_INDIC(I.CLAVE_INDICADOR) AS ULTIMO_RESULT
FROM
	POA.RAMO_PROGRAMA RP,
	S_POA_PROGRAMA P,
	DGI.RAMOS R,
	DGI.VW_SEI_INDIC_GRAL I,
	DGI.VW_SEI_INDIC_META_ANUAL MA,
	DGI.PARAMETROS PTO,
    DGI.VW_SEI_INDICADOR_DIMENSION IND,
	(
		SELECT MAA.CLAVE_INDICADOR,
			MAA.ANIO,
			MAA.META
		FROM
			DGI.VW_SEI_INDIC_META_ANUAL MAA
		WHERE
			MAA.ANIO=TO_NUMBER($P{YEAR})-1
	) METANT
WHERE
	RP.YEAR = $P{YEAR}
    AND RP.RAMO = $P{RAMO}
    AND RP.PRG = $P{PRG}
    AND R.YEAR = RP.YEAR
    AND R.RAMO = RP.RAMO
    AND P.YEAR = RP.YEAR
    AND P.PRG = RP.PRG
    AND I.YEAR (+)= RP.YEAR
    AND I.RAMO (+)= RP.RAMO
    AND I.PROG (+)= RP.PRG
    AND MA.CLAVE_INDICADOR(+)= I.CLAVE_INDICADOR
    AND METANT.CLAVE_INDICADOR(+)= I.CLAVE_INDICADOR
    AND MA.ANIO(+) = $P{YEAR}
    AND I.DIMENSION_ID = IND.DIMENSION_ID (+)
ORDER BY
    IND.DIMENSION_ID,
	R.RAMO,
	P.PRG]]>
	</queryString>
	<field name="DIMENSION_ID" class="java.math.BigDecimal"/>
	<field name="NOMBRE_DIMENSION" class="java.lang.String"/>
	<field name="INDICADOR" class="java.lang.String"/>
	<field name="RAMO" class="java.lang.String"/>
	<field name="NOMBRE_INDICADOR" class="java.lang.String"/>
	<field name="PERIODICIDAD" class="java.lang.String"/>
	<field name="META_ANUAL" class="java.math.BigDecimal"/>
	<field name="META_ANUAL_ANT" class="java.math.BigDecimal"/>
	<field name="RAMO_DESC" class="java.lang.String"/>
	<field name="PROGRAMA" class="java.lang.String"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="LOGO" class="java.lang.String"/>
	<field name="FECHA" class="java.sql.Timestamp"/>
	<field name="FOLIO" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="PARAESTATAL" class="java.lang.String"/>
	<field name="UNIDAD_MEDIDA" class="java.lang.String"/>
	<field name="OBJETIVO" class="java.lang.String"/>
	<field name="ULTIMO_RESULT" class="java.lang.String"/>
	<group name="DIMENSION">
		<groupExpression><![CDATA[$F{DIMENSION_ID}]]></groupExpression>
		<groupHeader>
			<band height="42">
				<printWhenExpression><![CDATA[$F{DIMENSION_ID} != null]]></printWhenExpression>
				<textField>
					<reportElement uuid="63312bf7-366c-4a40-b1ac-44948fa6f027" x="0" y="1" width="224" height="15"/>
					<textElement verticalAlignment="Bottom">
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["INDICADOR (ES) DE " + $F{NOMBRE_DIMENSION}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement uuid="0a841878-a08a-4777-845b-76b375b693ae" x="0" y="18" width="752" height="1" forecolor="#33CCFF"/>
				</line>
				<subreport>
					<reportElement uuid="bbc7423e-4d99-432d-8af0-eb68b7f7fc26" x="0" y="23" width="752" height="16"/>
					<subreportParameter name="DIMENSION">
						<subreportParameterExpression><![CDATA[$F{DIMENSION_ID}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "subRptIndicadoresDimensionFin.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band/>
	</title>
	<pageHeader>
		<band height="112" splitType="Stretch">
			<image>
				<reportElement uuid="169fa337-665a-404c-b8ec-9ba4a81979e1" x="0" y="0" width="65" height="75"/>
				<imageExpression><![CDATA[$P{IMG_DIR} + "EDO.gif"]]></imageExpression>
			</image>
			<textField>
				<reportElement uuid="5e04ed3d-fb27-4040-a4a3-8aca343dadff" x="65" y="0" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GOBIERNO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="2f25ae13-432f-4e57-b6b4-9f4c506c43ba" x="65" y="26" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SECRETARIA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="0defd541-1ad2-4a75-9641-1f848a25223f" x="65" y="52" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["CONCENTRADO DE INDICADORES DEL PROGRAMA " + $P{YEAR}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement uuid="c9a10832-2ce7-47e8-be03-795ad3409193" x="0" y="109" width="752" height="1"/>
			</line>
			<line>
				<reportElement uuid="38c2dbb3-ad10-483d-b721-b95b9c35a37d" x="0" y="72" width="752" height="1"/>
			</line>
			<staticText>
				<reportElement uuid="0d527d93-a70c-4926-86b3-0b26ef561500" x="0" y="88" width="80" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<text><![CDATA[PROGRAMA:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement uuid="91409fdb-dd6f-47c1-94bb-0f07c8608100" x="80" y="88" width="672" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[!$F{PRG}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{PROGRAMA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="5fe296f6-4f96-4c33-88fb-969f7aac273f" x="48" y="73" width="704" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[!$F{RAMO}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{RAMO_DESC}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="1201a620-7343-4561-a0d6-9a453beafe5e" x="0" y="73" width="48" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<text><![CDATA[RAMO:]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="25">
			<printWhenExpression><![CDATA[$F{DIMENSION_ID} != 1 && $F{DIMENSION_ID} != null]]></printWhenExpression>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="d309fb77-1fe9-415d-888a-201597fc2d94" stretchType="RelativeToBandHeight" x="0" y="4" width="220" height="15"/>
				<textElement textAlignment="Justified" verticalAlignment="Top">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NOMBRE_INDICADOR}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="2a25828d-db33-41c3-a2f3-3e5df68ec071" stretchType="RelativeToBandHeight" x="225" y="4" width="76" height="15"/>
				<textElement textAlignment="Center">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{META_ANUAL}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="59d6339d-6c7a-4015-a54c-a27a9923e2ec" stretchType="RelativeToBandHeight" x="437" y="5" width="97" height="15"/>
				<textElement textAlignment="Center">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PERIODICIDAD}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="aa1a08cb-b913-4bec-8390-123dc11c69a0" stretchType="RelativeToBandHeight" x="305" y="4" width="128" height="15"/>
				<textElement textAlignment="Center">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{UNIDAD_MEDIDA}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="325e26e7-051f-4f54-ba2e-fe3356bb2916" stretchType="RelativeToBandHeight" x="538" y="5" width="214" height="15"/>
				<textElement textAlignment="Justified">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{OBJETIVO}]]></textFieldExpression>
			</textField>
		</band>
		<band height="25">
			<printWhenExpression><![CDATA[$F{DIMENSION_ID} == 1 && $F{DIMENSION_ID} != null]]></printWhenExpression>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="6fc5bcf7-38be-4172-b254-48ab89581aab" stretchType="RelativeToBandHeight" x="0" y="4" width="220" height="15"/>
				<textElement textAlignment="Justified" verticalAlignment="Top">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NOMBRE_INDICADOR}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="c2bb2446-cf17-41f1-9398-377ef3ce7a7f" stretchType="RelativeToBandHeight" x="240" y="4" width="197" height="15"/>
				<textElement textAlignment="Justified">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{OBJETIVO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement uuid="cff82f3b-1d24-4b23-b51b-bfa589b27f3f" stretchType="RelativeToBandHeight" x="458" y="4" width="294" height="15"/>
				<textElement textAlignment="Justified" markup="none">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[" ESTE INDICADOR ES DE CARÁCTER ESTRATÉGICO Y SE ACTUALIZARÁ PARA FINES DE LA EVALUACIÓN DEL PLAN ESTATAL DE DESARROLLO"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
