<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SubRptMetasIndicadores" language="groovy" pageWidth="752" pageHeight="544" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="752" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isTitleNewPage="true" isIgnorePagination="true" uuid="e4b8cf87-a55d-4444-919c-aeee8b435317">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="YEAR" class="java.lang.String"/>
	<parameter name="RAMO" class="java.lang.String"/>
	<parameter name="PROG" class="java.lang.String"/>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
	DISTINCT
	I.CLAVE_INDICADOR AS INDICADOR,
R.RAMO,
	I.NOMBRE_INDICADOR AS NOMBRE_INDICADOR,
	DECODE(I.PERIODICIDAD,1,'MENSUAL',DECODE(I.PERIODICIDAD,2,'BIMESTRAL',DECODE(I.PERIODICIDAD,3,'TRIMESTRAL',DECODE(I.PERIODICIDAD,4,'CUATRIMESTRAL',DECODE(I.PERIODICIDAD,6,'SEMESTRAL',DECODE(I.PERIODICIDAD,12,'ANUAL',DECODE(I.PERIODICIDAD,24,'BIANUAL',DECODE(I.PERIODICIDAD,36,'TRIANUAL',DECODE(I.PERIODICIDAD,60,'QUINQUEANUAL','')))))))))  AS PERIODICIDAD,
	MA.META AS META_ANUAL,
	METANT.META AS META_ANUAL_ANT,
	R.RAMO||' '||R.DESCR AS RAMO_DESC,
	P.PRG||' '||P.DESCR AS PROGRAMA,
	PTO.GOBIERNO AS GOBIERNO,
	PTO.SECRETARIA AS SECRETARIA,
	PTO.LOGO AS LOGO,
	SYSDATE AS FECHA,
	'' AS FOLIO,
	P.PRG AS PRG,
	PTO.PARAESTATAL AS PARAESTATAL,
	I.UNIDAD_MEDIDA AS UNIDAD_MEDIDA,
	I.OBJETIVO_INDICADOR AS OBJETIVO,
	DGI.F_ULT_RESULT_INDIC(I.CLAVE_INDICADOR) AS ULTIMO_RESULT
FROM
	POA.RAMO_PROGRAMA RP,
	S_POA_PROGRAMA P,
	DGI.RAMOS R,
	DGI.VW_SEI_INDIC_GRAL I,
	DGI.VW_SEI_INDIC_META_ANUAL MA,
	DGI.PARAMETROS PTO,
	(
		SELECT MAA.CLAVE_INDICADOR,
			MAA.ANIO,
			MAA.META
		FROM
			DGI.VW_SEI_INDIC_META_ANUAL MAA
		WHERE
			MAA.ANIO=TO_NUMBER($P{YEAR})-1
	) METANT
WHERE
	RP.YEAR = $P{YEAR}  AND
	RP.RAMO = $P{RAMO} AND
	RP.PRG = $P{PROG} AND
	R.YEAR = RP.YEAR AND
	R.RAMO = RP.RAMO AND
	P.YEAR = RP.YEAR AND
	P.PRG = RP.PRG AND
	I.YEAR (+)= RP.YEAR AND
	I.RAMO (+)= RP.RAMO AND
	I.PROG (+)= RP.PRG  AND
	MA.CLAVE_INDICADOR(+)= I.CLAVE_INDICADOR AND
	METANT.CLAVE_INDICADOR(+)= I.CLAVE_INDICADOR AND
	MA.ANIO(+) = $P{YEAR}

ORDER BY
	R.RAMO,
	P.PRG]]>
	</queryString>
	<field name="INDICADOR" class="java.lang.String"/>
	<field name="RAMO" class="java.lang.String"/>
	<field name="NOMBRE_INDICADOR" class="java.lang.String"/>
	<field name="PERIODICIDAD" class="java.lang.String"/>
	<field name="META_ANUAL" class="java.math.BigDecimal"/>
	<field name="META_ANUAL_ANT" class="java.math.BigDecimal"/>
	<field name="RAMO_DESC" class="java.lang.String"/>
	<field name="PROGRAMA" class="java.lang.String"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="LOGO" class="java.lang.String"/>
	<field name="FECHA" class="java.sql.Timestamp"/>
	<field name="FOLIO" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="PARAESTATAL" class="java.lang.String"/>
	<field name="UNIDAD_MEDIDA" class="java.lang.String"/>
	<field name="OBJETIVO" class="java.lang.String"/>
	<field name="ULTIMO_RESULT" class="java.lang.String"/>
	<group name="Ramo" isStartNewPage="true">
		<groupExpression><![CDATA[$F{RAMO}]]></groupExpression>
	</group>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="113" splitType="Stretch">
			<line>
				<reportElement uuid="ea6138c9-384c-4297-98e1-0ba050daebcd" x="0" y="72" width="752" height="1"/>
			</line>
			<line>
				<reportElement uuid="85604b3e-87cc-42fe-8c84-e287b0ac6f9c" x="0" y="109" width="752" height="1"/>
			</line>
			<textField isBlankWhenNull="true">
				<reportElement uuid="dc01adfa-0120-4366-bc6a-9c18713ac876" x="67" y="26" width="620" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SECRETARIA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="609ab281-10bd-44b8-843d-c66c75c9a012" x="67" y="52" width="620" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["FORMATO DE METAS DE INDICADORES DE LOS PROGRAMAS "+$P{YEAR}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="895a08a6-d87a-4ac2-a144-8cba9bddc655" x="67" y="0" width="620" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GOBIERNO}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="db9fcc5e-c606-4bda-a923-f4b743cb821e" x="0" y="88" width="80" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<text><![CDATA[PROGRAMA:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement uuid="2a038045-0526-4fa7-9543-cd199ebcb81a" x="48" y="73" width="704" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[!$F{RAMO}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{RAMO_DESC}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="954cfddb-e873-4dfb-ba6d-50143040fa5f" x="0" y="73" width="48" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<text><![CDATA[RAMO:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement uuid="e5e0c0ae-d1bf-465b-b09d-43befdc1c7b4" x="80" y="88" width="672" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[!$F{PRG}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{PROGRAMA}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement uuid="535ae122-6035-4820-a91d-856b73efcd86" x="2" y="0" width="65" height="70"/>
				<imageExpression><![CDATA[$P{IMG_DIR} + "EDO.gif"]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="23" splitType="Stretch">
			<staticText>
				<reportElement uuid="1d940a97-2ee7-4f8e-bf80-bcb89024da0e" mode="Opaque" x="2" y="1" width="202" height="20" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[INDICADOR]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="23bf9a5c-c443-4e12-855f-62f34b02ac3a" mode="Opaque" x="392" y="1" width="84" height="20" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[PERIODICIDAD]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="bd176ff0-4945-438f-9f81-31a8d4c2c591" mode="Opaque" x="478" y="1" width="272" height="20" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[QUÃ‰ MIDE]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="db692d03-8ac8-4e50-94d2-5a3ae1e7acb6" mode="Opaque" x="286" y="1" width="104" height="20" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[UNIDAD DE MEDIDA]]></text>
			</staticText>
			<textField>
				<reportElement uuid="af582531-0b82-49cc-926a-96e2f2f69196" mode="Opaque" x="206" y="1" width="78" height="20" backcolor="#CCCCCC"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["META " + $P{YEAR}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="d9d078a7-fd64-4d35-9f6b-22d9bf2ef8af" stretchType="RelativeToBandHeight" x="2" y="0" width="202" height="15"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NOMBRE_INDICADOR}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="8ec44abc-d4ec-4b08-956a-077c4295c022" stretchType="RelativeToBandHeight" x="392" y="0" width="84" height="15"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PERIODICIDAD}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="f3ef17e9-a407-471b-b6e1-843df61f09fe" stretchType="RelativeToBandHeight" x="286" y="0" width="104" height="15"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{UNIDAD_MEDIDA}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="df57678f-92d3-486e-92bb-1c5920fc7c2a" stretchType="RelativeToBandHeight" x="206" y="0" width="78" height="15"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{META_ANUAL}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="d548e213-4844-4226-8f30-387354a753ed" stretchType="RelativeToBandHeight" x="478" y="0" width="272" height="15"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{OBJETIVO}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
