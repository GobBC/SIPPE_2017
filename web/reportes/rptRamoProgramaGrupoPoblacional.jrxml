<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptRamoProgramaGrupoPoblacional" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="b7175885-fd37-4424-b6d0-29ca3b3df42a">
	<property name="ireport.zoom" value="2.8531167061100042"/>
	<property name="ireport.x" value="275"/>
	<property name="ireport.y" value="337"/>
	<parameter name="YEAR" class="java.lang.Integer"/>
	<parameter name="RAMO_IN_LIST" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\desarrollo\\repositorio_local\\POA\\web\\reportes\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<parameter name="GRUPOPOB_IN_LIST" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
	M.RAMO AS RAMO,
	R.DESCR AS RAMO_DESCR,
	P.PRG AS PRG,
	P.DESCR AS PRG_DESCR,
	M.META AS META,
	M.META||'-'||M.DESCR AS META_DESCR,
	M.TIPO_COMPROMISO AS TIPO_META,
	PTC.DESCR AS TIPO_META_DESCR,
	PTC.BENEFICIADOS AS TIPO_BENEF,
	NVL(M.BENEFICIADOS,0) AS BENEFICIADOS,
	NVL(M.BENEF_HOMBRE,0) AS HOMBRES,
	NVL(M.BENEF_MUJER,0) AS MUJERES,
	PGP.GRUPO_POBLACION AS GRUPO_POBLACION,
	PGP.DESCR AS GRUPO_POBLACION_DESCR,
	SUM(ASIGNADO) AS ASIGNADO,
	NVL(SUM(ASIGNADO),0) + NVL(SUM(AMPLIACION),0) + NVL(SUM(REDUCCION),0) AS MODIFICADO,
	M.YEAR AS YEAR,
	PAR.GOBIERNO AS GOBIERNO,
	PAR.SECRETARIA AS SECRETARIA,
	SYSDATE AS FECHA,
	PAR.LOGO AS LOGO

FROM
	S_POA_META M,
	S_POA_ACCION ACC,
	POA.RAMO_PROGRAMA RP,
	DGI.POA_TIPO_COMPROMISO PTC,
	DGI.RAMOS R,
	S_POA_GPO_POBLACIONAL PGP,
	S_POA_PROGRAMA P,
	DGI.PARAMETROS PAR,
	SPP.PPTO PPTO,
	SPP.VW_PPTO_MOD_AUT PPTOAUT

WHERE
	RP.YEAR = $P{YEAR} AND
	RP.RAMO IN($P!{RAMO_IN_LIST}) AND
	RP.YEAR = R.YEAR AND
	RP.RAMO = R.RAMO AND
	P.YEAR = RP.YEAR AND
	P.PRG = RP.PRG AND
	M.YEAR = RP.YEAR AND
	M.RAMO = RP.RAMO AND
	M.PRG = RP.PRG AND
	ACC.YEAR = M.YEAR AND
	ACC.RAMO = M.RAMO AND
	ACC.PRG = M.PRG AND
	ACC.META = M.META AND
	PGP.GRUPO_POBLACION = ACC.GRUPO_POBLACION AND
	PGP.GRUPO_POBLACION IN($P!{GRUPOPOB_IN_LIST}) AND
	PTC.TIPO_COMPROMISO=M.TIPO_COMPROMISO AND
	PTC.BENEFICIADOS='S' AND
	PPTO.YEAR = ACC.YEAR AND
	PPTO.RAMO = ACC.RAMO AND
	PPTO.PRG = ACC.PRG AND
	PPTO.META = ACC.META AND
	PPTO.ACCION = ACC.ACCION AND
	PPTOAUT.YEAR (+)= PPTO.YEAR AND
	PPTOAUT.RAMO (+)= PPTO.RAMO AND
	PPTOAUT.PRG (+)= PPTO.PRG AND
	PPTOAUT.DEPTO (+)= PPTO.DEPTO AND
	PPTOAUT.FINALIDAD (+)= PPTO.FINALIDAD AND
	PPTOAUT.FUNCION (+)= PPTO.FUNCION AND
	PPTOAUT.SUBFUNCION (+)= PPTO.SUBFUNCION AND
	PPTOAUT.PRG_CONAC (+)= PPTO.PRG_CONAC AND
	PPTOAUT.PROYECTO (+)= PPTO.PROYECTO AND
	PPTOAUT.TIPO_PROY (+)= PPTO.TIPO_PROY AND
	PPTOAUT.META (+)= PPTO.META AND
	PPTOAUT.ACCION (+)= PPTO.ACCION AND
	PPTOAUT.PARTIDA (+)= PPTO.PARTIDA AND
	PPTOAUT.TIPO_GASTO (+)= PPTO.TIPO_GASTO AND
	PPTOAUT.FUENTE (+)= PPTO.FUENTE AND
	PPTOAUT.FONDO (+)= PPTO.FONDO AND
	PPTOAUT.RECURSO (+)= PPTO.RECURSO AND
	PPTOAUT.DELEGACION (+)= PPTO.DELEGACION AND
	PPTOAUT.REL_LABORAL (+)= PPTO.REL_LABORAL AND
	PPTOAUT.MUNICIPIO (+)= PPTO.MUNICIPIO AND
	PPTOAUT.MES (+)= PPTO.MES

GROUP BY
	M.RAMO,
	R.DESCR,
	P.PRG,
	P.DESCR,
	M.META,
	M.META||'-'||M.DESCR,
	M.TIPO_COMPROMISO,
	PTC.DESCR,
	PTC.BENEFICIADOS,
	NVL(M.BENEFICIADOS,0),
	NVL(M.BENEF_HOMBRE,0),
	NVL(M.BENEF_MUJER,0),
	PGP.GRUPO_POBLACION,
	PGP.DESCR,
	M.YEAR,
	PAR.GOBIERNO,
	PAR.SECRETARIA,
	SYSDATE,
	PAR.LOGO

ORDER BY
	M.RAMO,
	P.PRG,
	PGP.GRUPO_POBLACION,
	M.META]]>
	</queryString>
	<field name="RAMO" class="java.lang.String"/>
	<field name="RAMO_DESCR" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="PRG_DESCR" class="java.lang.String"/>
	<field name="META" class="java.math.BigDecimal"/>
	<field name="META_DESCR" class="java.lang.String"/>
	<field name="TIPO_META" class="java.math.BigDecimal"/>
	<field name="TIPO_META_DESCR" class="java.lang.String"/>
	<field name="TIPO_BENEF" class="java.lang.String"/>
	<field name="BENEFICIADOS" class="java.math.BigDecimal"/>
	<field name="HOMBRES" class="java.math.BigDecimal"/>
	<field name="MUJERES" class="java.math.BigDecimal"/>
	<field name="GRUPO_POBLACION" class="java.math.BigDecimal"/>
	<field name="GRUPO_POBLACION_DESCR" class="java.lang.String"/>
	<field name="ASIGNADO" class="java.math.BigDecimal"/>
	<field name="MODIFICADO" class="java.math.BigDecimal"/>
	<field name="YEAR" class="java.lang.String"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="FECHA" class="java.sql.Timestamp"/>
	<field name="LOGO" class="java.lang.String"/>
	<variable name="BENEFICIADOS_SUM" class="java.math.BigDecimal" resetType="Group" resetGroup="GrupoPoblacional" calculation="Sum">
		<variableExpression><![CDATA[$F{BENEFICIADOS}]]></variableExpression>
	</variable>
	<variable name="ASIGNADO_SUM" class="java.math.BigDecimal" resetType="Group" resetGroup="GrupoPoblacional" calculation="Sum">
		<variableExpression><![CDATA[$F{ASIGNADO}]]></variableExpression>
	</variable>
	<variable name="BENEF_M_H" class="java.math.BigDecimal" resetType="Group" resetGroup="GrupoPoblacional" calculation="Sum">
		<variableExpression><![CDATA[$F{HOMBRES}+$F{MUJERES}]]></variableExpression>
	</variable>
	<variable name="MODIFICADO_SUM" class="java.math.BigDecimal" resetType="Group" resetGroup="GrupoPoblacional" calculation="Sum">
		<variableExpression><![CDATA[$F{MODIFICADO}]]></variableExpression>
	</variable>
	<group name="ramo" isStartNewPage="true">
		<groupExpression><![CDATA[$F{RAMO}]]></groupExpression>
	</group>
	<group name="programa" isStartNewPage="true">
		<groupExpression><![CDATA[$F{PRG}]]></groupExpression>
	</group>
	<group name="GrupoPoblacional" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{GRUPO_POBLACION}]]></groupExpression>
		<groupHeader>
			<band height="32">
				<staticText>
					<reportElement uuid="a016a880-477b-43fa-af34-a134230c4b61" x="27" y="17" width="219" height="15"/>
					<textElement>
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[META]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="2ce51c54-7e35-4882-9b4c-6ca87b0d3639" x="412" y="17" width="116" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[NÚMERO DE BENEFICIADOS]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="ec195b33-24c9-454a-9f8f-8d35addc66c4" x="528" y="17" width="112" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[IMPORTE ASIGNADO]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="3ce2b46c-a001-4457-98b4-5a602f7bba75" x="0" y="0" width="123" height="15"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
						<paragraph leftIndent="5"/>
					</textElement>
					<text><![CDATA[GRUPO POBLACIONAL:]]></text>
				</staticText>
				<textField isBlankWhenNull="true">
					<reportElement uuid="963c5068-e5c5-44a1-800a-e3d69113f5ed" x="135" y="0" width="617" height="15" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[!$F{PRG}.isEmpty()]]></printWhenExpression>
					</reportElement>
					<textElement verticalAlignment="Top">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{GRUPO_POBLACION}+":"+$F{GRUPO_POBLACION_DESCR}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="eaeb5a4b-76a3-4cf9-bba8-04948a61f3fe" x="640" y="17" width="112" height="15"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[IMPORTE MODIFICADO]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="17">
				<staticText>
					<reportElement uuid="858451e3-8503-4ece-9f32-78ddbab7dc2d" x="379" y="0" width="33" height="15"/>
					<textElement textAlignment="Right">
						<font size="8" isBold="true" isUnderline="false"/>
					</textElement>
					<text><![CDATA[TOTAL:]]></text>
				</staticText>
				<textField evaluationTime="Group" evaluationGroup="GrupoPoblacional" pattern="#,##0">
					<reportElement uuid="11c7c701-0370-470c-9d50-335f02cf7082" x="412" y="0" width="116" height="15"/>
					<textElement textAlignment="Center">
						<font size="8"/>
						<paragraph rightIndent="10"/>
					</textElement>
					<textFieldExpression><![CDATA[new Double($V{BENEF_M_H}.doubleValue())]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00">
					<reportElement uuid="9b003ab4-56b7-42de-9106-b2cd5e478192" x="528" y="0" width="112" height="15"/>
					<textElement textAlignment="Right">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[new Double($V{ASIGNADO_SUM}.doubleValue())]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00">
					<reportElement uuid="2c7bd4ce-8f2b-4c67-90b8-38f83091994d" x="640" y="0" width="112" height="15"/>
					<textElement textAlignment="Right">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[new Double($V{MODIFICADO_SUM}.doubleValue())]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="META">
		<groupExpression><![CDATA[$F{META}]]></groupExpression>
	</group>
	<pageHeader>
		<band height="107">
			<image>
				<reportElement uuid="d09c0afc-72e7-449c-b09b-6831812b3c3f" x="0" y="0" width="66" height="60"/>
				<imageExpression><![CDATA[$P{IMG_DIR}+"EDO.gif"]]></imageExpression>
			</image>
			<line>
				<reportElement uuid="146e4d09-1ebc-4481-8bf0-be0eb2027dc1" x="0" y="72" width="752" height="1"/>
			</line>
			<line>
				<reportElement uuid="1d3be814-588d-4f2c-973f-13545b01ff28" x="0" y="103" width="752" height="1"/>
			</line>
			<textField isBlankWhenNull="true">
				<reportElement uuid="193ae223-68ce-4eaa-9c20-d2124762461e" x="0" y="0" width="752" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GOBIERNO}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="82d8947e-094c-49bc-a69a-d66b7509c3e3" x="0" y="26" width="752" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SECRETARIA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="5c259b52-9a61-4e75-883f-ec887db2686c" x="0" y="52" width="752" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["IDENTIFICACIÓN DE PROGRAMAS PARA EL EJERCICIO FISCAL " + $P{YEAR}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="bb8180b6-1d7b-41d7-ad76-c2b90b635dfc" x="80" y="88" width="672" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[!$F{PRG}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{PRG}+" "+$F{PRG_DESCR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="f21f9617-7bdc-4edd-864f-0630eccf050d" x="0" y="73" width="48" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<text><![CDATA[RAMO:]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="026d26c2-3bfa-4df4-8c7f-0c5df4f30dbc" x="0" y="88" width="80" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<text><![CDATA[PROGRAMA:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement uuid="efbee63e-350d-43b9-beac-094401dd7bc2" x="48" y="73" width="704" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[!$F{RAMO}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{RAMO}+" "+$F{RAMO_DESCR}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="17" splitType="Stretch">
			<textField isStretchWithOverflow="true">
				<reportElement uuid="3d204f71-817e-4beb-9ab0-7d276316d503" stretchType="RelativeToBandHeight" x="27" y="0" width="352" height="15"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{META_DESCR}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="#,##0">
				<reportElement uuid="9d3c441d-fdef-4f68-aedb-6da5fa5a1a82" stretchType="RelativeToBandHeight" x="412" y="0" width="116" height="15"/>
				<textElement textAlignment="Center">
					<font size="8"/>
					<paragraph rightIndent="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{HOMBRES}+$F{MUJERES}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="¤ #,##0.00">
				<reportElement uuid="7484c446-b6f2-4c3f-ba98-0d9348c1ddf7" stretchType="RelativeToBandHeight" x="528" y="0" width="112" height="15"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[new Double($F{ASIGNADO}.doubleValue())]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="¤ #,##0.00">
				<reportElement uuid="63ebafbf-b76c-4157-b70d-1a0b12b51768" stretchType="RelativeToBandHeight" x="640" y="0" width="112" height="15"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[new Double($F{MODIFICADO}.doubleValue())]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="14" splitType="Stretch">
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement uuid="1e825092-9443-4d79-8296-59c51232005f" x="300" y="1" width="146" height="10"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{FECHA}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement uuid="8f3086f4-326e-4acd-9aa2-a78411f2665e" x="0" y="0" width="752" height="1"/>
			</line>
			<textField>
				<reportElement uuid="fc025135-1d00-4ec9-ae09-1fdc28db3973" x="677" y="0" width="43" height="10"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement uuid="82c05f7a-6e86-4ad3-91c1-ed849c957e9d" x="720" y="0" width="31" height="10"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[" de " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement uuid="769e604e-48f1-4b4e-bc1d-e4c9361618b3" x="0" y="0" width="286" height="10"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA["rptRamoProgramaGrupoPoblacional"]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
