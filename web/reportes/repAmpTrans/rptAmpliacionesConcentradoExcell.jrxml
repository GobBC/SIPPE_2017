<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptAmpliacionesConcentrado" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="d08c2163-aa59-4226-a299-145bee118e5f">
	<property name="ireport.zoom" value="1.3310000000000013"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="Table Dataset 1" uuid="f35a429f-5fca-46f3-9a38-51cb2470a5e1"/>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<parameter name="OFICIO" class="java.lang.String"/>
	<parameter name="TIPO" class="java.lang.String"/>
	<parameter name="YEAR" class="java.lang.String"/>
	<parameter name="TIPOFICIO" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
	TT.RAMO,
	TT.PARTIDA,
	PAR.DESCR,
	SUM(TT.IMPTE) AS IMPORTE,
	SUM(CASE WHEN (TT.IMPTE <0) THEN TT.IMPTE ELSE 0 END) AS IMPTE_NEGATIVO,
	SUM(CASE WHEN (TT.IMPTE >0) THEN TT.IMPTE ELSE 0 END) AS IMPTE_POSITIVO,
	P.GOBIERNO,
	P.SECRETARIA,
	MOVS.STATUS,
	P.LOGO,
	SUM(SPP.F_ACTUALIZADO_ANUAL_REP(TT.RAMO,TT.PARTIDA,TT.OFICIO,$P{TIPO},$P{YEAR})) AS ANUAL

FROM
	SPP.AMPLIACIONES TT,
	DGI.PARTIDA PAR,
	DGI.PARAMETROS P,
	POA.MOVOFICIOS MOVS

WHERE
	TT.PARTIDA = PAR.PARTIDA AND
	TT.OFICIO = MOVS.OFICIO AND
	MOVS.OFICIO = $P{OFICIO} AND
	MOVS.TIPOMOV = $P{TIPO} AND
	PAR.YEAR = $P{YEAR}

GROUP BY
	TT.RAMO,
	TT.PARTIDA,
	PAR.DESCR,
	P.GOBIERNO,
	P.SECRETARIA,
	MOVS.STATUS,
	P.LOGO]]>
	</queryString>
	<field name="RAMO" class="java.lang.String"/>
	<field name="PARTIDA" class="java.lang.String"/>
	<field name="DESCR" class="java.lang.String"/>
	<field name="IMPORTE" class="java.math.BigDecimal"/>
	<field name="IMPTE_NEGATIVO" class="java.math.BigDecimal"/>
	<field name="IMPTE_POSITIVO" class="java.math.BigDecimal"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="STATUS" class="java.lang.String"/>
	<field name="LOGO" class="java.lang.String"/>
	<field name="ANUAL" class="java.math.BigDecimal"/>
	<variable name="Negativos" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{IMPTE_NEGATIVO}]]></variableExpression>
	</variable>
	<variable name="POSITIVO" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{IMPTE_POSITIVO}]]></variableExpression>
	</variable>
	<variable name="V_ASIGNADO" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{ANUAL}]]></variableExpression>
	</variable>
	<variable name="redporc" class="java.math.BigDecimal">
		<variableExpression><![CDATA[($F{ANUAL} != 0 && $F{IMPTE_NEGATIVO} !=0  ? (((($F{IMPTE_NEGATIVO}.abs() / $F{ANUAL}.abs() )).abs())*100): 0)]]></variableExpression>
	</variable>
	<variable name="blueporc" class="java.math.BigDecimal">
		<variableExpression><![CDATA[($F{ANUAL} != 0 && $F{IMPTE_POSITIVO} != 0 ? (((($F{IMPTE_POSITIVO}.abs() / $F{ANUAL}.abs() )).abs())*100) : 0)]]></variableExpression>
	</variable>
	<variable name="sumredporc" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{redporc}]]></variableExpression>
	</variable>
	<variable name="sumblueporc" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$V{blueporc}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="22">
			<elementGroup/>
			<elementGroup/>
			<elementGroup/>
			<elementGroup/>
			<elementGroup>
				<elementGroup/>
			</elementGroup>
			<elementGroup/>
			<elementGroup/>
			<staticText>
				<reportElement uuid="92ece82e-298c-48ed-9192-9368962e4a5d" x="505" y="0" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[reduccion]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="3c91263d-d4d5-4e7f-a53f-489c2f4203b1" x="634" y="-1" width="92" height="20"/>
				<textElement/>
				<text><![CDATA[ampliacion	]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="1f984695-38d2-4b37-98fe-579eda75267a" x="384" y="0" width="121" height="20"/>
				<textElement/>
				<text><![CDATA[presupuesto asignado de ley]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="4737c64e-fbbe-42d2-8350-04f45b19ef4d" x="184" y="0" width="200" height="20"/>
				<textElement/>
				<text><![CDATA[descripcion de la partida]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="68c13629-7369-4f56-893a-db505ead94dd" x="84" y="0" width="100" height="20"/>
				<textElement/>
				<text><![CDATA[partida]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="0d4f48c1-6ba1-42be-97ff-d131e376016e" x="45" y="0" width="39" height="20"/>
				<textElement/>
				<text><![CDATA[ramo]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="94309f72-451f-4e58-b6cb-1b0dc8d0f64f" x="1" y="1" width="44" height="20"/>
				<textElement/>
				<text><![CDATA[tipo mov.]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="0b8972fe-3c0e-46e7-9d68-bee8ac3fc6c4" x="605" y="0" width="29" height="20"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[%]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="2d84179c-6d9d-4d3e-b0c4-4eb7b58ba002" x="726" y="-1" width="26" height="20"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[%]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="21">
			<textField>
				<reportElement uuid="6dd6046f-eeaf-4eba-b36f-69e55136fed9" x="0" y="1" width="45" height="20"/>
				<textElement>
					<font isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{TIPOFICIO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="24eeee90-b960-4869-9219-15f8714f0ce1" x="45" y="1" width="39" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{RAMO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="c0c2538a-b834-4f68-a7bb-677416fbd843" x="84" y="1" width="100" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{PARTIDA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="afbb15f4-2622-42e4-9bdd-e34c2af601cb" x="184" y="1" width="200" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{DESCR}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="67da98c8-c564-4e32-a4d4-b87849c9cffd" x="384" y="0" width="121" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{ANUAL}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="5b99c0f4-4c3e-49a4-8597-ffd3e4fb11c4" x="634" y="0" width="92" height="20">
					<printWhenExpression><![CDATA[new Boolean ($F{IMPTE_POSITIVO} > 0.00)]]></printWhenExpression>
				</reportElement>
				<textElement/>
				<textFieldExpression><![CDATA[$F{IMPTE_POSITIVO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="a3c9ff1a-abc3-4701-ab87-7ac6a8b8ba18" x="505" y="1" width="100" height="20">
					<printWhenExpression><![CDATA[new Boolean ($F{IMPTE_NEGATIVO} < 0.00)]]></printWhenExpression>
				</reportElement>
				<textElement/>
				<textFieldExpression><![CDATA[$F{IMPTE_NEGATIVO}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00 %;(#,##0.00 %)">
				<reportElement uuid="00a0c6a2-06bc-44f1-9f40-d98f4df2d19c" x="605" y="1" width="29" height="20">
					<printWhenExpression><![CDATA[new Boolean ($F{ANUAL} > 0.00)]]></printWhenExpression>
				</reportElement>
				<textElement/>
				<textFieldExpression><![CDATA[$V{redporc}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="e89c3917-f358-4e44-be16-f6c91e8b10e0" x="726" y="1" width="26" height="20">
					<printWhenExpression><![CDATA[new Boolean ($F{ANUAL} > 0.00)]]></printWhenExpression>
				</reportElement>
				<textElement/>
				<textFieldExpression><![CDATA[$V{blueporc}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
