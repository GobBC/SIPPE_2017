<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptMovtosProgramaticosAccion" language="groovy" pageWidth="770" pageHeight="612" columnWidth="770" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="65ed133f-76d1-457f-9820-ad4b026858d7">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<parameter name="YEAR" class="java.lang.String"/>
	<parameter name="OFICIO" class="java.lang.Long"/>
	<parameter name="ESTATUS" class="java.lang.String"/>
	<parameter name="RPT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA["C:\\desarrollo\\repositorio_local\\POA_13042016\\trunk\\POA\\web\\reportes\\repAmpTrans\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="TIPOFICIO" class="java.lang.String"/>
	<parameter name="META" class="java.math.BigDecimal"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT T.RAMO,T.DEPTO,T.META,T.ACCION
FROM
SPP.TRANSFERENCIAS T,
DGI.OFICONS O
WHERE T.OFICIO=$P{OFICIO}
AND T.META=$P{META}
AND O.OFICIO=T.OFICIO
AND O.CONSEC=T.CONSEC
AND O.TIPO=$P{TIPOFICIO}
AND (LENGTH(NVL($P{TIPOFICIO},'00'))=1)
GROUP BY T.RAMO,T.DEPTO,T.META,T.ACCION
UNION
SELECT T.RAMO,T.DEPTO,T.META,T.ACCION
FROM
SPP.TRANSFREC T,
DGI.OFICONS O
WHERE T.OFICIO=$P{OFICIO}
AND T.META=$P{META}
AND O.OFICIO=T.OFICIO
AND O.CONSEC=T.CONSEC
AND O.TIPO=$P{TIPOFICIO}
AND (LENGTH(NVL($P{TIPOFICIO},'00'))=1)
GROUP BY T.RAMO,T.DEPTO,T.META,T.ACCION

UNION

SELECT T.RAMO,T.DEPTO,T.META,T.ACCION
FROM
SPP.TRANSFERENCIAS T
WHERE T.OFICIO=$P{OFICIO}
AND T.META=$P{META}
AND (LENGTH(NVL($P{TIPOFICIO},'00'))>1)
GROUP BY T.RAMO,T.DEPTO,T.META,T.ACCION
UNION
SELECT T.RAMO,T.DEPTO,T.META,T.ACCION
FROM
SPP.TRANSFREC T
WHERE T.OFICIO=$P{OFICIO}
AND T.META=$P{META}
AND (LENGTH(NVL($P{TIPOFICIO},'00'))>1)
GROUP BY T.RAMO,T.DEPTO,T.META,T.ACCION]]>
	</queryString>
	<field name="RAMO" class="java.lang.String"/>
	<field name="DEPTO" class="java.lang.String"/>
	<field name="META" class="java.math.BigDecimal"/>
	<field name="ACCION" class="java.math.BigDecimal"/>
	<sortField name="RAMO"/>
	<sortField name="ACCION"/>
	<detail>
		<band height="4" splitType="Stretch">
			<subreport>
				<reportElement uuid="12eb485c-ec00-43a2-b9ac-2e1328215b87" x="0" y="1" width="750" height="0"/>
				<subreportParameter name="SUBREPORT_DIR">
					<subreportParameterExpression><![CDATA[$P{RPT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="OFICIO">
					<subreportParameterExpression><![CDATA[$P{OFICIO}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="DEPTO">
					<subreportParameterExpression><![CDATA[$F{DEPTO}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="ACCION">
					<subreportParameterExpression><![CDATA[$F{ACCION}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="YEAR">
					<subreportParameterExpression><![CDATA[$P{YEAR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="IMG_DIR">
					<subreportParameterExpression><![CDATA[$P{IMG_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="META">
					<subreportParameterExpression><![CDATA[$P{META}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="STATUS">
					<subreportParameterExpression><![CDATA[$P{ESTATUS}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RAMO">
					<subreportParameterExpression><![CDATA[$F{RAMO}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RPT_DIR">
					<subreportParameterExpression><![CDATA[$P{RPT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{RPT_DIR} + "rptAccionDescr.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
</jasperReport>
