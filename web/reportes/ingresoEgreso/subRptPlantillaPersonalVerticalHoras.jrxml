<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="subRptPlantillaPersonalVerticalHoras" language="groovy" pageWidth="1055" pageHeight="493" orientation="Landscape" columnWidth="1055" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="46dd87d8-534b-4f3a-a8a4-2a8d919e4f91">
	<property name="ireport.zoom" value="3.543122000000003"/>
	<property name="ireport.x" value="35"/>
	<property name="ireport.y" value="0"/>
	<style name="Porcentaje1">
		<conditionalStyle>
			<conditionExpression><![CDATA[($F{CANTIDAD_ACT}) >= 0]]></conditionExpression>
			<style forecolor="#000000" pattern=""/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($F{CANTIDAD_ACT} ) < 0]]></conditionExpression>
			<style forecolor="#FF0000" pattern="">
				<pen lineColor="#000000"/>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineColor="#000000"/>
					<leftPen lineColor="#000000"/>
					<bottomPen lineColor="#000000"/>
					<rightPen lineColor="#000000"/>
				</box>
			</style>
		</conditionalStyle>
	</style>
	<style name="Porcentaje2">
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{CANTIDAD_ACT_1} ) >= 0]]></conditionExpression>
			<style forecolor="#000000"/>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[($V{CANTIDAD_ACT_1} ) < 0]]></conditionExpression>
			<style forecolor="#FF0000">
				<pen lineColor="#000000"/>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineColor="#000000"/>
					<leftPen lineColor="#000000"/>
					<bottomPen lineColor="#000000"/>
					<rightPen lineColor="#000000"/>
				</box>
			</style>
		</conditionalStyle>
	</style>
	<style name="Asignado">
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{CANTIDAD_ACT} >= 0]]></conditionExpression>
			<style forecolor="#000000">
				<pen lineColor="#000000"/>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineColor="#000000"/>
					<leftPen lineColor="#000000"/>
					<bottomPen lineColor="#000000"/>
					<rightPen lineColor="#000000"/>
				</box>
			</style>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{CANTIDAD_ACT} < 0]]></conditionExpression>
			<style forecolor="#FF0000">
				<pen lineColor="#000000"/>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineColor="#000000"/>
					<leftPen lineColor="#000000"/>
					<bottomPen lineColor="#000000"/>
					<rightPen lineColor="#000000"/>
				</box>
			</style>
		</conditionalStyle>
	</style>
	<style name="RamoAsignado">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{CANTIDAD_ACT_1} >= 0]]></conditionExpression>
			<style forecolor="#000000">
				<pen lineColor="#000000"/>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineColor="#000000"/>
					<leftPen lineColor="#000000"/>
					<bottomPen lineColor="#000000"/>
					<rightPen lineColor="#000000"/>
				</box>
			</style>
		</conditionalStyle>
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{CANTIDAD_ACT_1} < 0]]></conditionExpression>
			<style forecolor="#FF0000">
				<pen lineColor="#000000"/>
				<box>
					<pen lineColor="#000000"/>
					<topPen lineColor="#000000"/>
					<leftPen lineColor="#000000"/>
					<bottomPen lineColor="#000000"/>
					<rightPen lineColor="#000000"/>
				</box>
			</style>
		</conditionalStyle>
	</style>
	<parameter name="YEAR" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="RAMO" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
	RELLAB.DESCR,
	NVL(REL_ACT.CANTIDAD_ACT,0)  CANTIDAD_ACT

FROM
	S_POA_REL_LABORAL RELLAB,
	(
		SELECT
			RPP.YEAR,
			RPP.REL_LABORAL,
			NVL(SUM(RPP.CANTIDAD),0) AS CANTIDAD_ACT
		FROM
			POA.RAMO_PLANTILLA_PERSONAL RPP,
			S_POA_REL_LABORAL PRL
		WHERE
			RPP.YEAR = to_char(to_number($P{YEAR})) AND
			RPP.RAMO = $P{RAMO} AND
			PRL.YEAR = RPP.YEAR AND
			PRL.REL_LABORAL = RPP.REL_LABORAL AND
			PRL.TIPO = 'H'
		GROUP BY
			RPP.YEAR,
			RPP.RAMO,
			RPP.REL_LABORAL,
			RPP.RAMO,
			PRL.DESCR
	) REL_ACT

WHERE
	RELLAB.YEAR = to_char(to_number($P{YEAR})) AND
	REL_ACT.YEAR (+)= RELLAB.YEAR AND
	REL_ACT.REL_LABORAL (+)= RELLAB.REL_LABORAL AND
	RELLAB.TIPO = 'H'

ORDER BY
	RELLAB.DESCR]]>
	</queryString>
	<field name="DESCR" class="java.lang.String"/>
	<field name="CANTIDAD_ACT" class="java.math.BigDecimal"/>
	<variable name="CANTIDAD_ACT_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{CANTIDAD_ACT}]]></variableExpression>
	</variable>
	<detail>
		<band height="10" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="#,##0;(#,##0)" isBlankWhenNull="true">
				<reportElement uuid="a8f38409-58dc-400f-9580-de8aced4d55d" style="Asignado" stretchType="RelativeToBandHeight" x="221" y="0" width="99" height="10" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[$F{CANTIDAD_ACT}>0]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="6"/>
					<paragraph rightIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{CANTIDAD_ACT}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="03ced73f-11e0-42dd-826d-3bd562563d0a" stretchType="RelativeToBandHeight" x="0" y="0" width="221" height="10" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[$F{CANTIDAD_ACT}>0]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{DESCR}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="10" splitType="Stretch">
			<staticText>
				<reportElement uuid="f9f079a6-36f3-4e0a-aa64-bbb1a663356d" mode="Transparent" x="0" y="0" width="221" height="10" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[$V{CANTIDAD_ACT_1}>0]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle" markup="none">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL HORAS:]]></text>
			</staticText>
			<textField pattern="#,##0;(#,##0)" isBlankWhenNull="true">
				<reportElement uuid="c0ab93df-c464-4d6e-a400-04fdd4585f38" style="RamoAsignado" mode="Transparent" x="221" y="0" width="99" height="10" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[$V{CANTIDAD_ACT_1}>0]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="6"/>
					<paragraph rightIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{CANTIDAD_ACT_1}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
	<noData>
		<band height="10">
			<textField pattern="#,##0;(#,##0)" isBlankWhenNull="true">
				<reportElement uuid="21c81792-6b3c-4e77-8129-1050addf0c07" style="RamoAsignado" mode="Transparent" x="221" y="0" width="99" height="10" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[$V{CANTIDAD_ACT_1}>0]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="6"/>
					<paragraph rightIndent="3"/>
				</textElement>
			</textField>
			<staticText>
				<reportElement uuid="4116d8e7-ad54-4be2-8e5b-f581d7a00f7e" mode="Transparent" x="0" y="0" width="221" height="10" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[$V{CANTIDAD_ACT_1}>0]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle" markup="none">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL HORAS:]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
