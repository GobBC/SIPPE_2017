<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SubRptProgramas" language="groovy" pageWidth="752" pageHeight="544" orientation="Landscape" columnWidth="752" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isTitleNewPage="true" uuid="306809f6-cdf0-4d3a-9340-bd53028929d4">
	<property name="ireport.zoom" value="1.1000000000000012"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="YEAR" class="java.lang.String"/>
	<parameter name="RAMO" class="java.lang.String"/>
	<parameter name="PROG" class="java.lang.String"/>
	<parameter name="VISIBLE" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["S"]]></defaultValueExpression>
	</parameter>
	<parameter name="RPT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<parameter name="FIRMA" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
	DISTINCT
	R.RAMO,
	R.DESCR AS RAMO_DESCR,
	P.PRG,
	P.DESCR AS PRG_DESCR,
	RP.OBJETIVO AS OBJETIVOS_PROGRAMA,
	RP.RESULTADO AS RESULTADO_PROGRAMA,
	PA.GOBIERNO,
	PA.SECRETARIA,
	PA.LOGO,
	RP.DEPTO,
	SYSDATE AS HOY,
	'' AS FOLIO,
	F.NOMBRE AS FIN_NOMBRE,
	F.DESCR AS FIN_DESCR,
	RP.PROPOSITO,
	PA.PARAESTATAL,
	RP.TIPO_OBJ AS TIPO_OBJ,
	POA.F_TITULAR(F.YEAR, R.RAMO) AS RESP_RAMO,
	POA.F_RESPONSABLE(F.YEAR, R.RAMO,P.PRG) AS RESP_PRG

FROM
	S_POA_PROGRAMA P,
	POA.RAMO_PROGRAMA RP,
	DGI.RAMOS R,
	DGI.PARAMETROS PA,
	POA.RAMO_FIN RF,
	S_POA_FIN F

WHERE
	RP.YEAR = $P{YEAR} AND
	RP.RAMO IN ($P!{RAMO}) AND
	RP.PRG = $P{PROG} AND
	R.YEAR = RP.YEAR AND
	R.RAMO = RP.RAMO AND
	P.YEAR = RP.YEAR AND
	P.PRG = RP.PRG AND
	RF.RAMO (+)= RP.RAMO  AND
	RF.YEAR (+)= RP.YEAR AND
	RF.FIN (+)= RP.FIN AND
	F.FIN (+)= RF.FIN AND
	F.YEAR (+)= RF.YEAR AND
	P.YEAR = R.YEAR

ORDER BY
	R.RAMO,
	P.PRG]]>
	</queryString>
	<field name="RAMO" class="java.lang.String"/>
	<field name="RAMO_DESCR" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="PRG_DESCR" class="java.lang.String"/>
	<field name="OBJETIVOS_PROGRAMA" class="java.lang.String"/>
	<field name="RESULTADO_PROGRAMA" class="java.lang.String"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="LOGO" class="java.lang.String"/>
	<field name="DEPTO" class="java.lang.String"/>
	<field name="HOY" class="java.sql.Timestamp"/>
	<field name="FOLIO" class="java.lang.String"/>
	<field name="FIN_NOMBRE" class="java.lang.String"/>
	<field name="FIN_DESCR" class="java.lang.String"/>
	<field name="PROPOSITO" class="java.lang.String"/>
	<field name="PARAESTATAL" class="java.lang.String"/>
	<field name="TIPO_OBJ" class="java.lang.String"/>
	<field name="RESP_RAMO" class="java.lang.String"/>
	<field name="RESP_PRG" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band/>
	</title>
	<pageHeader>
		<band height="123" splitType="Stretch">
			<line>
				<reportElement uuid="27b11387-85a8-4c3c-83ed-50b73bf90d2b" x="0" y="72" width="752" height="1"/>
			</line>
			<line>
				<reportElement uuid="ed8d6ea0-e440-417e-94d2-388c43fa5702" x="0" y="109" width="752" height="1"/>
			</line>
			<textField isBlankWhenNull="true">
				<reportElement uuid="44d41b05-be10-4a3e-ab05-3a62543c0190" x="65" y="0" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GOBIERNO}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="e4479dbf-1756-419b-a158-c1565aec1552" x="65" y="26" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SECRETARIA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="c6780a5f-116e-42a1-8549-edc230e4e7a9" x="65" y="52" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["IDENTIFICACIÃ“N DE PROGRAMAS PARA EL EJERCICIO FISCAL " + $P{YEAR}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="4d827a8e-2a74-4206-961a-c3279d158702" x="80" y="88" width="672" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[!$F{PRG}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{PRG}+" "+$F{PRG_DESCR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="b1c6b8a1-fd8a-4aef-8a28-9be749648bfe" x="0" y="73" width="48" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<text><![CDATA[RAMO:]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="270d84f8-dc85-42c3-85f3-7b8010932e3c" x="0" y="88" width="80" height="15"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
					<paragraph leftIndent="5"/>
				</textElement>
				<text><![CDATA[PROGRAMA:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement uuid="c3906674-1217-45fa-8e7a-a705d6cb89bc" x="48" y="73" width="704" height="15" isRemoveLineWhenBlank="true">
					<printWhenExpression><![CDATA[!$F{RAMO}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Top"/>
				<textFieldExpression><![CDATA[$F{RAMO}+" "+$F{RAMO_DESCR}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement uuid="050d55c5-d79a-4b85-9ed4-14227be5f4c3" x="0" y="0" width="65" height="70"/>
				<imageExpression><![CDATA[$P{IMG_DIR} + "EDO.gif"]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<detail>
		<band height="82">
			<staticText>
				<reportElement uuid="2bbbc1a8-4c22-49a0-8a93-7bc827ccf640" mode="Opaque" x="104" y="6" width="115" height="20" backcolor="#CCCCCC"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[ELEMENTO]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="a6efbf39-bbf7-42bc-8c8b-c30ce688a195" mode="Opaque" x="230" y="6" width="430" height="20" backcolor="#CCCCCC"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[RESUMEN NARRATIVO]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="2d71bdfb-8abc-4811-832c-77edcb1f4699" x="104" y="32" width="115" height="44"/>
				<textElement verticalAlignment="Top">
					<font fontName="SansSerif" size="12" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[FIN]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="25814e9a-ba35-4c33-aa91-97d45149808b" stretchType="RelativeToBandHeight" x="230" y="32" width="430" height="44">
					<printWhenExpression><![CDATA[$P{VISIBLE}.equals( "S" ) && !($F{FIN_DESCR}.equals( null ) ) && !($F{FIN_DESCR}.equals( "" ) )]]></printWhenExpression>
				</reportElement>
				<box topPadding="2"/>
				<textElement textAlignment="Justified" verticalAlignment="Top">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{FIN_DESCR}]]></textFieldExpression>
			</textField>
		</band>
		<band height="51">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="5c23d002-2fa2-41a2-aced-5a29338cd1b7" stretchType="RelativeToBandHeight" x="230" y="1" width="430" height="44">
					<printWhenExpression><![CDATA[$P{VISIBLE}.equals( "S" ) && !($F{PROPOSITO}.equals( null ) ) && !($F{PROPOSITO}.equals( "" ) )]]></printWhenExpression>
				</reportElement>
				<box topPadding="2"/>
				<textElement textAlignment="Justified" verticalAlignment="Top">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PROPOSITO}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="6eabe71a-5a33-48eb-a9ca-235f9a2f3458" x="104" y="1" width="115" height="44"/>
				<textElement verticalAlignment="Top">
					<font fontName="SansSerif" size="12" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[PROPOSITO]]></text>
			</staticText>
		</band>
		<band height="107">
			<subreport>
				<reportElement uuid="22baa274-5c2a-4e86-a0f0-a26810a91605" x="43" y="0" width="665" height="50"/>
				<subreportParameter name="PROG">
					<subreportParameterExpression><![CDATA[$F{PRG}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="YEAR">
					<subreportParameterExpression><![CDATA[$P{YEAR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RAMO">
					<subreportParameterExpression><![CDATA[$F{RAMO}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{RPT_DIR} + "SubRptPresupuesto.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<lastPageFooter>
		<band height="45">
			<printWhenExpression><![CDATA[$P{FIRMA}.equals("1")]]></printWhenExpression>
			<staticText>
				<reportElement uuid="84c5800a-6a42-48a3-86ff-5ea3c1cbf082" x="43" y="24" width="267" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[RESPONSABLE DEL RAMO]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="4a5b0448-e784-4b8c-8521-dc881325f1b9" x="441" y="24" width="267" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[RESPONSABLE DEL PROGRAMA]]></text>
			</staticText>
			<line>
				<reportElement uuid="b90fc7fa-4e6e-4660-8656-fa1e5f12b802" x="43" y="21" width="267" height="1"/>
			</line>
			<line>
				<reportElement uuid="7e77f7ea-5ce6-4831-8852-11591689aacc" x="441" y="21" width="267" height="1"/>
			</line>
			<textField isBlankWhenNull="true">
				<reportElement uuid="eec08d44-8f1d-49a3-b3e0-abdd185c8068" x="43" y="0" width="267" height="20">
					<printWhenExpression><![CDATA[!($F{RESP_RAMO}.equals( null ))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{RESP_RAMO}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="c15502c7-d48a-4b4b-b20c-9cf7070daeb0" x="441" y="0" width="267" height="20">
					<printWhenExpression><![CDATA[!($F{RESP_PRG}.equals( null ))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{RESP_PRG}]]></textFieldExpression>
			</textField>
		</band>
	</lastPageFooter>
</jasperReport>
