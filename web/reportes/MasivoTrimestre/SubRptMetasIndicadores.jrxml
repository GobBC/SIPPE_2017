<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SubRptMetasIndicadores" language="groovy" pageWidth="750" pageHeight="572" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="750" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isTitleNewPage="true" isIgnorePagination="true" uuid="e4b8cf87-a55d-4444-919c-aeee8b435317">
	<property name="ireport.zoom" value="1.6105100000000014"/>
	<property name="ireport.x" value="444"/>
	<property name="ireport.y" value="0"/>
	<parameter name="YEAR" class="java.lang.String"/>
	<parameter name="RAMO" class="java.lang.String"/>
	<parameter name="PROG" class="java.lang.String"/>
	<parameter name="MES" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<parameter name="DOCVALIDO" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT DISTINCT I.CLAVE_INDICADOR AS INDICADOR,
       I.NOMBRE_INDICADOR AS NOMBRE_INDICADOR,
       I.CLAVE_INDICADOR AS CLAVE_INDICADOR, DECODE(I.PERIODICIDAD,1,'MENSUAL',DECODE(I.PERIODICIDAD,2,'BIMESTRAL',DECODE(I.PERIODICIDAD,3,'TRIMESTRAL',DECODE(I.PERIODICIDAD,4,'CUATRIMESTRAL',DECODE(I.PERIODICIDAD,6,'SEMESTRAL',DECODE(I.PERIODICIDAD,12,'ANUAL',DECODE(I.PERIODICIDAD,24,'BIANUAL',DECODE(I.PERIODICIDAD,36,'TRIANUAL',DECODE(I.PERIODICIDAD,60,'QUINQUEANUAL',' ')))))))))  AS PERIODICIDAD,
       MA.META AS META_ANUAL,
       METANT.META AS META_ANUAL_ANT,
       R.RAMO||' '||R.DESCR AS RAMO,
	    P.PRG||' '||P.DESCR AS PROGRAMA,
       SYSDATE AS FECHA,
       '' AS FOLIO,
       I.PROG AS PRG,
       I.UNIDAD_MEDIDA AS UNIDAD_MEDIDA,
       I.OBJETIVO_INDICADOR AS OBJETIVO,
       DGI.F_ULT_RESULT_INDIC_ALPERIODO(I.CLAVE_INDICADOR,TO_NUMBER($P{YEAR}),$P{MES}) AS ULTIMO_RESULT,
       DECODE(I.INICIO,0,DECODE(SIGN($P{MES}-I.PERIODICIDAD),-1,1,0),DECODE(SIGN($P{MES}-I.INICIO),-1,1,0)) AS SINCAP,
PTO.GOBIERNO,
PTO.SECRETARIA,
PTO.LOGO,
PTO.PARAESTATAL
FROM POA.RAMO_PROGRAMA RP,
    S_POA_PROGRAMA P,
    DGI.RAMOS R,
     DGI.VW_SEI_INDIC_GRAL I,
     DGI.VW_SEI_INDIC_META_ANUAL MA,
        (SELECT MAA.CLAVE_INDICADOR,
                MAA.ANIO,
                MAA.META
         FROM DGI.VW_SEI_INDIC_META_ANUAL MAA
         WHERE MAA.ANIO=TO_NUMBER($P{YEAR})-1) METANT,
DGI.PARAMETROS PTO
WHERE
    P.YEAR = $P{YEAR}  AND

	RP.RAMO = $P{RAMO} AND
	RP.PRG = $P{PROG} AND
	R.YEAR = RP.YEAR AND
	R.RAMO = RP.RAMO AND
	P.YEAR = RP.YEAR AND
	P.PRG = RP.PRG AND
    I.YEAR (+)= RP.YEAR AND
	I.RAMO (+)= RP.RAMO AND
	I.PROG (+)= RP.PRG  AND
    MA.ANIO(+) = $P{YEAR} AND
    MA.CLAVE_INDICADOR(+)= I.CLAVE_INDICADOR AND
    METANT.CLAVE_INDICADOR(+)= I.CLAVE_INDICADOR]]>
	</queryString>
	<field name="INDICADOR" class="java.lang.String"/>
	<field name="NOMBRE_INDICADOR" class="java.lang.String"/>
	<field name="CLAVE_INDICADOR" class="java.lang.String"/>
	<field name="PERIODICIDAD" class="java.lang.String"/>
	<field name="META_ANUAL" class="java.math.BigDecimal"/>
	<field name="META_ANUAL_ANT" class="java.math.BigDecimal"/>
	<field name="RAMO" class="java.lang.String"/>
	<field name="PROGRAMA" class="java.lang.String"/>
	<field name="FECHA" class="java.sql.Timestamp"/>
	<field name="FOLIO" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="UNIDAD_MEDIDA" class="java.lang.String"/>
	<field name="OBJETIVO" class="java.lang.String"/>
	<field name="ULTIMO_RESULT" class="java.lang.String"/>
	<field name="SINCAP" class="java.math.BigDecimal"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="LOGO" class="java.lang.String"/>
	<field name="PARAESTATAL" class="java.lang.String"/>
	<group name="Ramo" isStartNewPage="true">
		<groupExpression><![CDATA[$F{RAMO}]]></groupExpression>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="9" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="131">
			<image>
				<reportElement uuid="635f155f-0cdb-42ac-8121-4ccadfb70316" x="173" y="1" width="402" height="59">
					<printWhenExpression><![CDATA[$P{DOCVALIDO}.equals('N')]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[$P{IMG_DIR} + "NOVALIDO.gif"]]></imageExpression>
			</image>
			<staticText>
				<reportElement uuid="095879a9-acf2-4ceb-b15b-9a32c48d9f58" x="14" y="102" width="63" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[PROGRAMA:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement uuid="b7497087-dada-45ee-8b11-3f58b72b9423" x="77" y="102" width="627" height="20"/>
				<box leftPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PROGRAMA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="1095e2e4-17d8-4a4b-b57a-733677b07b2f" x="77" y="82" width="627" height="20"/>
				<box leftPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{RAMO}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="9295bfb6-7545-489b-b517-d6e6cd4848dd" x="14" y="82" width="63" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[RAMO:]]></text>
			</staticText>
			<line>
				<reportElement uuid="ea6138c9-384c-4297-98e1-0ba050daebcd" x="12" y="76" width="727" height="1"/>
			</line>
			<line>
				<reportElement uuid="85604b3e-87cc-42fe-8c84-e287b0ac6f9c" x="12" y="128" width="727" height="1"/>
			</line>
			<textField isBlankWhenNull="true">
				<reportElement uuid="dc01adfa-0120-4366-bc6a-9c18713ac876" x="65" y="20" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SECRETARIA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="609ab281-10bd-44b8-843d-c66c75c9a012" x="65" y="40" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["FORMATO DE METAS DE INDICADORES DE LOS PROGRAMAS "+$P{YEAR}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="895a08a6-d87a-4ac2-a144-8cba9bddc655" x="65" y="0" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GOBIERNO}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement uuid="56d61e1c-51b2-46b9-9529-f258bc64b358" x="0" y="0" width="65" height="59">
					<printWhenExpression><![CDATA[$P{DOCVALIDO}.equals('S')]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[$P{IMG_DIR} + "EDO.gif"]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="17" splitType="Stretch">
			<staticText>
				<reportElement uuid="1d940a97-2ee7-4f8e-bf80-bcb89024da0e" mode="Opaque" x="20" y="0" width="168" height="16" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[INDICADOR]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="23bf9a5c-c443-4e12-855f-62f34b02ac3a" mode="Opaque" x="378" y="0" width="82" height="16" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[PERIODICIDAD]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="bd176ff0-4945-438f-9f81-31a8d4c2c591" mode="Opaque" x="462" y="0" width="180" height="16" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[QUÃ‰ MIDE]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="db692d03-8ac8-4e50-94d2-5a3ae1e7acb6" mode="Opaque" x="268" y="0" width="108" height="16" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[UNIDAD DE MEDIDA]]></text>
			</staticText>
			<textField>
				<reportElement uuid="4a132347-bd82-4d6d-a2bd-5ac11bb79fb1" mode="Opaque" x="190" y="0" width="76" height="16" backcolor="#CCCCCC"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["META " + $P{YEAR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="a0de55bd-c1c4-4334-9787-242964368783" mode="Opaque" x="644" y="0" width="78" height="16" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[RESULTADO]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="10" splitType="Prevent">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="d9d078a7-fd64-4d35-9f6b-22d9bf2ef8af" stretchType="RelativeToBandHeight" x="20" y="0" width="169" height="10" isPrintWhenDetailOverflows="true"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font fontName="SansSerif" size="6" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NOMBRE_INDICADOR}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="8ec44abc-d4ec-4b08-956a-077c4295c022" stretchType="RelativeToBandHeight" x="378" y="0" width="82" height="10"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PERIODICIDAD}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="f3ef17e9-a407-471b-b6e1-843df61f09fe" stretchType="RelativeToBandHeight" x="268" y="0" width="108" height="10"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{UNIDAD_MEDIDA}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="df57678f-92d3-486e-92bb-1c5920fc7c2a" stretchType="RelativeToBandHeight" x="190" y="0" width="76" height="10"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{META_ANUAL}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="d548e213-4844-4226-8f30-387354a753ed" stretchType="RelativeToBandHeight" x="462" y="0" width="180" height="10" isPrintWhenDetailOverflows="true"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font fontName="SansSerif" size="6" isBold="true" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{OBJETIVO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="a57df461-b01b-45d8-8102-50325846620f" stretchType="RelativeToBandHeight" x="644" y="0" width="78" height="10"/>
				<box>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="6"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{SINCAP}.toString()).equalsIgnoreCase("1") || $F{ULTIMO_RESULT}.equalsIgnoreCase("") ? "NO PROGRAMADO" : $F{ULTIMO_RESULT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
