<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SubRptProgramas" language="groovy" pageWidth="752" pageHeight="500" orientation="Landscape" columnWidth="752" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isTitleNewPage="true" isIgnorePagination="true" uuid="306809f6-cdf0-4d3a-9340-bd53028929d4">
	<property name="ireport.zoom" value="1.2100000000000002"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="YEAR" class="java.lang.Integer"/>
	<parameter name="RAMO" class="java.lang.String"/>
	<parameter name="PROG" class="java.lang.String"/>
	<parameter name="RPT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA["C:\\desarrollo\\repositorio_local\\POA_13042016\\trunk\\POA\\web\\reportes\\MasivoTrimestre\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<parameter name="PERIODO" class="java.lang.Integer"/>
	<parameter name="DOCVALIDO" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT DISTINCT
       R.RAMO,
       R.RAMO || ' - ' || R.DESCR AS RAMO_DESCR,
       P.PRG,
       P.PRG || ' - ' || P.DESCR AS PRG_DESCR,
       RP.OBJETIVO AS OBJETIVOS_PROGRAMA,
       RP.RESULTADO AS RESULTADO_PROGRAMA,
       PA.GOBIERNO,
       PA.SECRETARIA,
       PA.LOGO,
       RP.DEPTO,
       SYSDATE AS HOY,
       '' AS FOLIO,
       F.NOMBRE AS FIN_NOMBRE,
       F.DESCR AS FIN_DESCR,
       RP.PROPOSITO,
       PA.PARAESTATAL,
       RP.TIPO_OBJ AS TIPO_OBJ,
       POA.F_TITULAR(R.YEAR, R.RAMO) AS RESP_RAMO,
       POA.F_RESPONSABLE(R.YEAR, R.RAMO,P.PRG) AS RESP_PRG,
       PA.REPWEB_IMPFIRMA
FROM
       S_POA_PROGRAMA P,
       POA.RAMO_PROGRAMA RP,
       DGI.RAMOS R,
       DGI.PARAMETROS PA,
       POA.RAMO_FIN RF,
       S_POA_FIN F
WHERE  RP.RAMO IN ($P{RAMO}) AND
       RP.YEAR = $P{YEAR} AND
       R.YEAR = RP.YEAR AND
       R.RAMO = RP.RAMO AND
       P.PRG = $P{PROG} AND
       RP.PRG = P.PRG AND
       RF.RAMO = RP.RAMO AND
       RF.YEAR = RP.YEAR AND
       F.FIN = RF.FIN AND
       F.FIN = RP.FIN AND
       F.YEAR = RF.YEAR AND
       P.YEAR = R.YEAR
ORDER BY
	R.RAMO,
	P.PRG]]>
	</queryString>
	<field name="RAMO" class="java.lang.String"/>
	<field name="RAMO_DESCR" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="PRG_DESCR" class="java.lang.String"/>
	<field name="OBJETIVOS_PROGRAMA" class="java.lang.String"/>
	<field name="RESULTADO_PROGRAMA" class="java.lang.String"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="LOGO" class="java.lang.String"/>
	<field name="DEPTO" class="java.lang.String"/>
	<field name="HOY" class="java.sql.Timestamp"/>
	<field name="FOLIO" class="java.lang.String"/>
	<field name="FIN_NOMBRE" class="java.lang.String"/>
	<field name="FIN_DESCR" class="java.lang.String"/>
	<field name="PROPOSITO" class="java.lang.String"/>
	<field name="PARAESTATAL" class="java.lang.String"/>
	<field name="TIPO_OBJ" class="java.lang.String"/>
	<field name="RESP_RAMO" class="java.lang.String"/>
	<field name="RESP_PRG" class="java.lang.String"/>
	<field name="REPWEB_IMPFIRMA" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="9" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="115" splitType="Stretch">
			<line>
				<reportElement uuid="27b11387-85a8-4c3c-83ed-50b73bf90d2b" x="6" y="66" width="727" height="1"/>
			</line>
			<textField isBlankWhenNull="true">
				<reportElement uuid="6f5f0c6d-1ec5-4e5e-b803-3f62e78cadd9" x="94" y="67" width="614" height="20"/>
				<box leftPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{RAMO_DESCR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="c695132c-1ff9-4ca2-843a-4944fb81729f" x="18" y="87" width="76" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[PROGRAMA:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement uuid="c37f46b9-3149-4dfc-be51-b7b17806ce0d" x="94" y="87" width="614" height="20"/>
				<box leftPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PRG_DESCR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="501002b9-65aa-4c44-b8b7-44a95ad13891" x="18" y="67" width="76" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[RAMO:]]></text>
			</staticText>
			<line>
				<reportElement uuid="ed8d6ea0-e440-417e-94d2-388c43fa5702" x="6" y="107" width="727" height="1"/>
			</line>
			<textField isBlankWhenNull="true">
				<reportElement uuid="44d41b05-be10-4a3e-ab05-3a62543c0190" x="65" y="0" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GOBIERNO}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="e4479dbf-1756-419b-a158-c1565aec1552" x="65" y="20" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SECRETARIA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="c6780a5f-116e-42a1-8549-edc230e4e7a9" x="65" y="40" width="622" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["IDENTIFICACIÃ“N DE PROGRAMAS PARA EL EJERCICIO FISCAL " + $P{YEAR}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement uuid="0d0492ff-1cb0-426a-a6e7-06624e8af96c" x="0" y="0" width="65" height="59">
					<printWhenExpression><![CDATA[$P{DOCVALIDO}.equals('S')]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[$P{IMG_DIR} + "EDO.gif"]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<detail>
		<band height="68" splitType="Stretch">
			<image>
				<reportElement uuid="dedf03a1-7f0a-4d66-99b7-433e2a13b0ae" x="255" y="20" width="346" height="45">
					<printWhenExpression><![CDATA[$P{DOCVALIDO}.equals('N')]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[$P{IMG_DIR} + "NOVALIDO.gif"]]></imageExpression>
			</image>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="25814e9a-ba35-4c33-aa91-97d45149808b" stretchType="RelativeToTallestObject" x="182" y="21" width="475" height="44"/>
				<box topPadding="2"/>
				<textElement textAlignment="Justified" verticalAlignment="Top">
					<font fontName="SansSerif"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{FIN_DESCR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="2d71bdfb-8abc-4811-832c-77edcb1f4699" x="85" y="21" width="86" height="44"/>
				<textElement verticalAlignment="Top">
					<font fontName="SansSerif" size="12" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[FIN]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="2bbbc1a8-4c22-49a0-8a93-7bc827ccf640" mode="Opaque" x="85" y="0" width="86" height="16" backcolor="#CCCCCC"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[ELEMENTO]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="a6efbf39-bbf7-42bc-8c8b-c30ce688a195" mode="Opaque" x="182" y="0" width="475" height="16" backcolor="#CCCCCC"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[RESUMEN NARRATIVO]]></text>
			</staticText>
		</band>
		<band height="45">
			<staticText>
				<reportElement uuid="6eabe71a-5a33-48eb-a9ca-235f9a2f3458" x="85" y="0" width="86" height="44"/>
				<textElement verticalAlignment="Top">
					<font fontName="SansSerif" size="12" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[PROPOSITO]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="5c23d002-2fa2-41a2-aced-5a29338cd1b7" stretchType="RelativeToTallestObject" x="182" y="0" width="475" height="44"/>
				<box topPadding="2"/>
				<textElement textAlignment="Justified" verticalAlignment="Top">
					<font fontName="SansSerif" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PROPOSITO}]]></textFieldExpression>
			</textField>
		</band>
		<band splitType="Stretch">
			<subreport>
				<reportElement uuid="22baa274-5c2a-4e86-a0f0-a26810a91605" stretchType="RelativeToBandHeight" x="1" y="0" width="750" height="0"/>
				<subreportParameter name="PROG">
					<subreportParameterExpression><![CDATA[$F{PRG}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="DOCVALIDO">
					<subreportParameterExpression><![CDATA[$P{DOCVALIDO}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="YEAR">
					<subreportParameterExpression><![CDATA[$P{YEAR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="IMG_DIR">
					<subreportParameterExpression><![CDATA[$P{IMG_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RAMO">
					<subreportParameterExpression><![CDATA[$F{RAMO}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="PERIODO">
					<subreportParameterExpression><![CDATA[$P{PERIODO}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{RPT_DIR} + "SubRptPresupuesto.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<lastPageFooter>
		<band height="76" splitType="Stretch">
			<printWhenExpression><![CDATA[($F{REPWEB_IMPFIRMA}.equals('S') && $P{DOCVALIDO}.equals('S'))]]></printWhenExpression>
			<staticText>
				<reportElement uuid="3e9a6ff0-4a3a-4e0f-b0e8-034483347c78" x="44" y="60" width="267" height="16">
					<printWhenExpression><![CDATA[!($F{RESP_RAMO}.equals( null ))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[RESPONSABLE DEL RAMO]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="b87c21eb-5254-4ae0-866c-5c21af485945" x="442" y="60" width="267" height="16">
					<printWhenExpression><![CDATA[!($F{RESP_PRG}.equals( null ))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[RESPONSABLE DEL PROGRAMA]]></text>
			</staticText>
			<line>
				<reportElement uuid="fb1acb7f-ebeb-4623-99f9-79679453e46f" x="44" y="59" width="267" height="1">
					<printWhenExpression><![CDATA[!($F{RESP_RAMO}.equals( null ))]]></printWhenExpression>
				</reportElement>
			</line>
			<line>
				<reportElement uuid="2418fba7-a795-44eb-af10-7d3b78a0500e" x="442" y="59" width="267" height="1">
					<printWhenExpression><![CDATA[!($F{RESP_PRG}.equals( null ))]]></printWhenExpression>
				</reportElement>
			</line>
			<textField>
				<reportElement uuid="faa5f538-7c76-4523-9013-210f3e7937e3" x="44" y="42" width="267" height="16">
					<printWhenExpression><![CDATA[!($F{RESP_RAMO}.equals( null ))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{RESP_RAMO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="30c6bd96-c951-4e6a-9b86-855a329f1fcd" x="442" y="42" width="267" height="16">
					<printWhenExpression><![CDATA[!($F{RESP_PRG}.equals( null ))]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{RESP_PRG}]]></textFieldExpression>
			</textField>
		</band>
	</lastPageFooter>
</jasperReport>
