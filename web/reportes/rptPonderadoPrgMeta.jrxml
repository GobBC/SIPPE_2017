<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptPonderadoPrgMeta" language="groovy" pageWidth="612" pageHeight="792" columnWidth="592" leftMargin="10" rightMargin="10" topMargin="10" bottomMargin="10" uuid="b7175885-fd37-4424-b6d0-29ca3b3df42a">
	<property name="ireport.zoom" value="2.357947691000033"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="98"/>
	<parameter name="YEAR" class="java.lang.Integer"/>
	<parameter name="RAMO_IN_LIST" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\desarrollo\\repositorio_local\\POA\\web\\reportes\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="IMG_DIR" class="java.lang.String"/>
	<parameter name="QUERY" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="PONDERADOPRG_IN_LIST" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="PONDERADOMETA_IN_LIST" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT R.RAMO,R.DESCR AS RAMO_DESCR,M.PRG,P.DESCR AS PROGRAMA_DESCR,
    NVL(UPPER(POP.DESCR),'SIN PONDERADO') AS PRG_PONDERADO,
    M.META, M.DESCR AS META_DESCR,
    NVL(UPPER(POM.DESCR),'SIN PONDERADO') AS META_PONDERADO,
    PM.GOBIERNO,
    PM.SECRETARIA,
    SYSDATE AS FECHA
FROM DGI.RAMOS R,
    S_POA_META M,
    S_POA_PROGRAMA P,
    POA.RAMO_PROGRAMA RP,
    (SELECT PONDERADO, TO_CHAR(PONDERADO)||'-'||DESCR as DESCR FROM DGI.PONDERADO UNION SELECT '0' AS PONDERADO, 'Sin Ponderar' AS DESCR FROM SYS.DUAL) POM,
    (SELECT PONDERADO, TO_CHAR(PONDERADO)||'-'||DESCR as DESCR FROM DGI.PONDERADO UNION SELECT '0' AS PONDERADO, 'Sin Ponderar' AS DESCR FROM SYS.DUAL) POP,
    DGI.PARAMETROS PM
WHERE
      R.YEAR = $P{YEAR}
    AND R.RAMO IN ($P!{RAMO_IN_LIST})
    AND R.RAMO = M.RAMO
    AND R.YEAR = M.YEAR
    AND M.YEAR = P.YEAR
    AND M.PRG = P.PRG
    AND P.YEAR = RP.YEAR
    AND M.RAMO = RP.RAMO
    AND P.PRG = RP.PRG
    AND POP.PONDERADO(+) = NVL(RP.PONDERADO,0)
    AND POM.PONDERADO(+) = NVL(M.PONDERADO,0)
    AND POP.PONDERADO IN($P!{PONDERADOPRG_IN_LIST})
    AND POM.PONDERADO IN($P!{PONDERADOMETA_IN_LIST})
ORDER BY R.RAMO,M.PRG,M.META]]>
	</queryString>
	<field name="RAMO" class="java.lang.String"/>
	<field name="RAMO_DESCR" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="PROGRAMA_DESCR" class="java.lang.String"/>
	<field name="PRG_PONDERADO" class="java.lang.String"/>
	<field name="META" class="java.math.BigDecimal"/>
	<field name="META_DESCR" class="java.lang.String"/>
	<field name="META_PONDERADO" class="java.lang.String"/>
	<field name="GOBIERNO" class="java.lang.String"/>
	<field name="SECRETARIA" class="java.lang.String"/>
	<field name="FECHA" class="java.sql.Timestamp"/>
	<group name="RAMO" isReprintHeaderOnEachPage="true" minHeightToStartNewPage="82">
		<groupExpression><![CDATA[$F{RAMO}]]></groupExpression>
		<groupHeader>
			<band height="46" splitType="Prevent">
				<line>
					<reportElement uuid="1d3be814-588d-4f2c-973f-13545b01ff28" x="0" y="6" width="592" height="1"/>
				</line>
				<textField isBlankWhenNull="true">
					<reportElement uuid="97011c3a-3706-4161-ba6a-9c3b788c092e" x="0" y="8" width="592" height="12"/>
					<textElement verticalAlignment="Top" markup="none">
						<font fontName="SansSerif" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["RAMO: "+ $F{RAMO}+" "+$F{RAMO_DESCR}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement uuid="1475a71a-9a60-4950-81f4-d72e7cdc9fd8" x="19" y="20" width="429" height="12"/>
					<textElement verticalAlignment="Top">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[PROGRAMA]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="1f3d595f-1132-4634-8d97-fd7b2fe22f81" x="40" y="32" width="408" height="12"/>
					<textElement verticalAlignment="Top">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[META]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="7d1db9c9-2559-4ef1-ad4d-fab4ebda3dd4" x="448" y="32" width="116" height="12"/>
					<textElement verticalAlignment="Top">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[PONDERADO DE LA META]]></text>
				</staticText>
				<line>
					<reportElement uuid="d02df89b-060a-4926-825f-ed97b9cc7274" x="0" y="44" width="592" height="1"/>
				</line>
				<staticText>
					<reportElement uuid="77efa510-2e77-4f20-8641-49b7b04e6f6a" x="460" y="20" width="132" height="12"/>
					<textElement textAlignment="Right" verticalAlignment="Top">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[PONDERADO DEL PROGRAMA]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<group name="PROGRAMA" minHeightToStartNewPage="36">
		<groupExpression><![CDATA[$F{PRG}]]></groupExpression>
		<groupHeader>
			<band height="21" splitType="Prevent">
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement uuid="aac12e44-4810-4cea-af26-eeae6a0a2735" x="19" y="0" width="429" height="20"/>
					<textElement verticalAlignment="Middle" markup="none">
						<font fontName="SansSerif" size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["PROGRAMA: "+$F{PRG}+" "+$F{PROGRAMA_DESCR}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement uuid="c21e7954-39a6-45a3-8756-a800f27d1326" x="460" y="0" width="132" height="20"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{PRG_PONDERADO}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="70">
			<textField isBlankWhenNull="true">
				<reportElement uuid="193ae223-68ce-4eaa-9c20-d2124762461e" x="65" y="0" width="462" height="18"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="SansSerif" size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{GOBIERNO}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="82d8947e-094c-49bc-a69a-d66b7509c3e3" x="65" y="18" width="462" height="16"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="SansSerif" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SECRETARIA}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="5c259b52-9a61-4e75-883f-ec887db2686c" x="65" y="34" width="462" height="14"/>
				<textElement textAlignment="Center" verticalAlignment="Top" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["REPORTE DE PONDERADOS"]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="5b4ac66c-64fc-4f5c-addb-c1683780070a" x="65" y="48" width="462" height="14"/>
				<textElement textAlignment="Center" verticalAlignment="Top" markup="none">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["RAMO - PROGRAMA - META "+ $P{YEAR}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement uuid="8ecc0849-301d-4212-88f1-ff3361bab9e9" x="0" y="0" width="65" height="59"/>
				<imageExpression><![CDATA[$P{IMG_DIR} + "EDO.gif"]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<detail>
		<band height="15" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="cc454cc9-8da3-4c46-a4cc-aa84c96e24d6" x="40" y="0" width="408" height="12"/>
				<textElement verticalAlignment="Top" markup="none">
					<font fontName="SansSerif" size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{META_DESCR}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement uuid="eddaee49-b103-47ea-84fc-d59736b82e0e" x="448" y="0" width="116" height="12"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{META_PONDERADO}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="11" splitType="Stretch">
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement uuid="1e825092-9443-4d79-8296-59c51232005f" x="0" y="1" width="592" height="10"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{FECHA}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement uuid="8f3086f4-326e-4acd-9aa2-a78411f2665e" x="0" y="0" width="592" height="1"/>
			</line>
			<textField>
				<reportElement uuid="fc025135-1d00-4ec9-ae09-1fdc28db3973" x="484" y="1" width="108" height="10"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA["PÃ¡gina "+$V{PAGE_NUMBER}+" de " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="03c7d105-fd71-48bc-8682-281f7f419a4e" x="0" y="1" width="109" height="10"/>
				<textElement markup="none">
					<font size="7"/>
				</textElement>
				<text><![CDATA[<rptPonderadoPrgMeta>]]></text>
			</staticText>
		</band>
	</pageFooter>
	<summary>
		<band height="12" splitType="Stretch"/>
	</summary>
</jasperReport>
