<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rptConsolidadoControlRecalendarizaciones" language="groovy" pageWidth="6000" pageHeight="612" orientation="Landscape" columnWidth="5960" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="960ea9f1-ecf4-4a13-bbcb-dd1214a9aecf">
	<property name="ireport.zoom" value="1.4641000000000013"/>
	<property name="ireport.x" value="849"/>
	<property name="ireport.y" value="0"/>
	<property name="net.sf.jasperreports.export.xls.white.page.background" value="false"/>
	<property name="net.sf.jasperreports.export.xls.remove.empty.space.between.rows" value="true"/>
	<parameter name="YEAR" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="RAMO_IN_LIST" class="java.lang.String"/>
	<parameter name="PERIODO_INI" class="java.lang.Integer"/>
	<parameter name="PERIODO_FIN" class="java.lang.String"/>
	<parameter name="QUERY" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="RPT_DIR" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
	TR.RAMO,
	RAMOS.DESCR RAMO_DESCR,
	TR.PRG,
	PROGRAMAS.DESCR PROGRAMA_DESCR,
	TR.DEPTO,
	DEPTOS.DESCR DEPARTAMENTO_DESCR
FROM
	POA.MOVOFICIOS MOVOF,
	(
		SELECT
			ALLMOVSLIST.OFICIO,
			ALLMOVSLIST.YEAR,
			ALLMOVSLIST.RAMO,
			ALLMOVSLIST.PRG,
			ALLMOVSLIST.META,
			ALLMOVSLIST.ACCION,
			ALLMOVSLIST.TIPO_PROY,
			ALLMOVSLIST.PROY,
			ALLMOVSLIST.DEPTO
		FROM
			(
				SELECT
					MOVMET.OFICIO,
					MET.YEAR,
					MET.RAMO,
					MET.PRG,
					MET.META,
					0 ACCION,
					MET.TIPO_PROY,
					MET.PROY,
					MET.DEPTO
				FROM
					POA.MOVOFICIOS_ESTIMACION MOVMET,
					S_POA_META MET
				WHERE
					MOVMET.YEAR = $P{YEAR} AND
					MOVMET.NVA_CREACION = 'N' AND
					MOVMET.META > 0 AND
					MET.YEAR = MOVMET.YEAR AND
					MET.RAMO = MOVMET.RAMO AND
					MET.META = MOVMET.META

				UNION ALL

				SELECT
					MOVACC.OFICIO,
					MET.YEAR,
					MET.RAMO,
					MET.PRG,
					MET.META,
					MOVACC.ACCION,
					MET.TIPO_PROY,
					MET.PROY,
					MET.DEPTO
				FROM
					POA.MOVOFICIOS_ACCION_ESTIMACION MOVACC,
					S_POA_META  MET
				WHERE
					MOVACC.YEAR = $P{YEAR} AND
					MOVACC.NVA_CREACION = 'N' AND
					MOVACC.ACCION > 0 AND
					MET.YEAR = MOVACC.YEAR AND
					MET.RAMO = MOVACC.RAMO AND
					MET.META = MOVACC.META

				UNION ALL

				SELECT
					MOVACCREQ.OFICIO,
					MET.YEAR,
					MET.RAMO,
					MET.PRG,
					MET.META,
					MOVACCREQ.ACCION,
					MET.TIPO_PROY,
					MET.PROY,
					MET.DEPTO
				FROM
					POA.MOVOFICIOS_ACCION_REQ MOVACCREQ,
					S_POA_META  MET
				WHERE
					MOVACCREQ.YEAR = $P{YEAR} AND
					MOVACCREQ.NVA_CREACION = 'N' AND
					MOVACCREQ.ACCION > 0 AND
					MET.YEAR = MOVACCREQ.YEAR AND
					MET.RAMO = MOVACCREQ.RAMO AND
					MET.META = MOVACCREQ.META

			) ALLMOVSLIST
		GROUP BY
			ALLMOVSLIST.OFICIO,
			ALLMOVSLIST.YEAR,
			ALLMOVSLIST.RAMO,
			ALLMOVSLIST.PRG,
			ALLMOVSLIST.META,
			ALLMOVSLIST.ACCION,
			ALLMOVSLIST.TIPO_PROY,
			ALLMOVSLIST.PROY,
			ALLMOVSLIST.DEPTO
		ORDER BY
			ALLMOVSLIST.OFICIO,
			ALLMOVSLIST.YEAR,
			ALLMOVSLIST.RAMO,
			ALLMOVSLIST.PRG,
			ALLMOVSLIST.META,
			ALLMOVSLIST.ACCION,
			ALLMOVSLIST.TIPO_PROY,
			ALLMOVSLIST.PROY,
			ALLMOVSLIST.DEPTO
	) TR,
	DGI.RAMOS RAMOS,
	S_POA_PROGRAMA PROGRAMAS,
	DGI.DEPENDENCIA DEPTOS

WHERE
	EXTRACT(YEAR FROM MOVOF.FECHAELAB) = $P{YEAR} AND
	EXTRACT(MONTH FROM MOVOF.FECHAELAB) >= $P{PERIODO_INI} AND
	EXTRACT(MONTH FROM MOVOF.FECHAELAB) <= $P{PERIODO_FIN} AND
	MOVOF.TIPOMOV = 'C' AND
	TR.YEAR = EXTRACT(YEAR FROM MOVOF.FECHAELAB) AND
	TR.OFICIO = MOVOF.OFICIO AND
	TR.RAMO IN($P!{RAMO_IN_LIST}) AND
	RAMOS.YEAR = EXTRACT(YEAR FROM MOVOF.FECHAELAB) AND
	RAMOS.YEAR = TR.YEAR AND
	RAMOS.RAMO = TR.RAMO AND
	PROGRAMAS.YEAR = EXTRACT(YEAR FROM MOVOF.FECHAELAB) AND
	PROGRAMAS.YEAR = TR.YEAR AND
	PROGRAMAS.PRG = TR.PRG AND
	PROGRAMAS.YEAR = RAMOS.YEAR AND
	DEPTOS.YEAR = EXTRACT(YEAR FROM MOVOF.FECHAELAB) AND
	DEPTOS.YEAR = TR.YEAR AND
	DEPTOS.RAMO = TR.RAMO AND
	DEPTOS.DEPTO = TR.DEPTO AND
	DEPTOS.YEAR = RAMOS.YEAR AND
	DEPTOS.RAMO = RAMOS.RAMO AND
	DEPTOS.YEAR = PROGRAMAS.YEAR
	$P!{QUERY}
GROUP BY
	TR.RAMO,
	RAMOS.DESCR,
	TR.PRG,
	PROGRAMAS.DESCR,
	TR.DEPTO,
	DEPTOS.DESCR
ORDER BY
	TR.RAMO,
	TR.PRG,
	TR.DEPTO]]>
	</queryString>
	<field name="RAMO" class="java.lang.String"/>
	<field name="RAMO_DESCR" class="java.lang.String"/>
	<field name="PRG" class="java.lang.String"/>
	<field name="PROGRAMA_DESCR" class="java.lang.String"/>
	<field name="DEPTO" class="java.lang.String"/>
	<field name="DEPARTAMENTO_DESCR" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="60">
			<staticText>
				<reportElement uuid="95b59981-9d2f-4ba4-b1ca-5823b25c8057" mode="Opaque" x="0" y="0" width="50" height="60" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Ramo]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="25144848-e30f-45d3-ac9e-9cb28300cdd9" mode="Opaque" x="50" y="0" width="200" height="60" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Ramo Descripción]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="cbe89956-6e0e-4348-93e8-6130dc2a5d9d" mode="Opaque" x="250" y="0" width="50" height="60" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Programa]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="50f9607c-7944-4f7e-933a-5c8673a815e1" mode="Opaque" x="300" y="0" width="200" height="60" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Programa Descripción]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="49810592-d610-4673-b677-9fbeb7aeacbd" mode="Opaque" x="500" y="30" width="50" height="30" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Unidad]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="b06e8d0a-abc5-4a07-94a5-ca70aa2de0d6" mode="Opaque" x="500" y="0" width="50" height="30" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Ejecutora]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="dfff477a-afcd-4940-ab9a-01f1d32da3c3" mode="Opaque" x="550" y="0" width="200" height="60" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Unidad Ejecutora Descripción]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="c95af470-8dce-4be3-9a5b-493fb5232772" mode="Opaque" x="750" y="0" width="100" height="30" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Recalendarizaciones]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="061e270b-e4e0-4383-a2cf-3fabc08c7c4c" mode="Opaque" x="750" y="30" width="100" height="30" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Solicitadas]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="51858531-1f46-4251-9c1f-a86a032b4a2b" mode="Opaque" x="850" y="30" width="100" height="30" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Autorizadas]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="d6a501be-bd9e-4868-8cfa-784f2a377b9e" mode="Opaque" x="850" y="0" width="100" height="30" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Recalendarizaciones]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="27002fe9-6ef9-47d5-a9cc-ddd273b22e7f" mode="Opaque" x="950" y="0" width="100" height="20" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Importe de]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="e64c9370-2357-48e6-ad78-9ab2001be46b" mode="Opaque" x="950" y="20" width="100" height="20" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Recalendarizaciones]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="5ecafafc-2533-4ab6-a13d-90381d2010be" mode="Opaque" x="950" y="40" width="100" height="20" forecolor="#FFFFFF" backcolor="#376091"/>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font fontName="Calibri" size="11"/>
				</textElement>
				<text><![CDATA[Aut.]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="37" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="e0af002e-c635-4736-95c6-f1e42a4e1a11" stretchType="RelativeToBandHeight" x="0" y="0" width="50" height="20"/>
				<textElement>
					<font fontName="Calibri" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{RAMO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="e8fdcaab-bd2d-4883-a56c-eae921df831f" stretchType="RelativeToBandHeight" x="50" y="0" width="200" height="20"/>
				<textElement>
					<font fontName="Calibri" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{RAMO_DESCR}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="b1278004-3e98-4979-9252-b2eed452bc93" stretchType="RelativeToBandHeight" x="250" y="0" width="50" height="20"/>
				<textElement>
					<font fontName="Calibri" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PRG}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="586d5844-d37d-427e-a070-8dbf7c32163c" stretchType="RelativeToBandHeight" x="300" y="0" width="200" height="20"/>
				<textElement>
					<font fontName="Calibri" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{PROGRAMA_DESCR}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="1d5be847-0e45-4d3e-90fd-88f86730777d" stretchType="RelativeToBandHeight" x="500" y="0" width="50" height="20"/>
				<textElement>
					<font fontName="Calibri" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{DEPTO}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="10995c62-9cc9-462b-b773-ed1546a5af36" stretchType="RelativeToBandHeight" x="550" y="0" width="200" height="20"/>
				<textElement>
					<font fontName="Calibri" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{DEPARTAMENTO_DESCR}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
